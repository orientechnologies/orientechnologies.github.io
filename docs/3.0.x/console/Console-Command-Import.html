<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Import Database - OrientDB</title>


        <!-- Custom HTML head -->

        <meta name="description" content="OrientDB documentation">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">OrientDB</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="console---import"><a class="header" href="#console---import">Console - <code>IMPORT</code></a></h1>
<p>Imports an exported database into the current one open. Import process doesn't lock the database, so any concurrent operations are allowed, but they could interfer in the import process causing errors.</p>
<p>The input file must use the JSON <a href="../admin/Export-Format.html">Export Format</a>, as generated by the <a href="Console-Command-Export.html"><code>EXPORT</code></a> command.  By default, this file is compressed using the GZIP algorithm.</p>
<p>With <a href="Console-Command-Export.html"><code>EXPORT</code></a>, this command allows you to migrate between releases without losing data, by exporting data from the old version and importing it into the new version.</p>
<p><strong>Syntax</strong></p>
<pre><code class="language-sql">IMPORT DATABASE &lt;input-file&gt; [-format = &lt;format&gt;]
                             [-preserveClusterIDs = &lt;true|false&gt;]
                             [-deleteRIDMapping = &lt;true|false&gt;]
                             [-merge = &lt;true|false&gt;]
                             [-migrateLinks = &lt;true|false&gt;]
                             [-rebuildIndexes = &lt;true|false&gt;]
</code></pre>
<ul>
<li><strong><code>&lt;format&gt;</code></strong> Is the input file format. If not specified, OrientDB tries to recognize it. The available formats are (since v2.2.8):</li>
<li><strong>orientdb</strong>, the <a href="Console-Command-Export.html">OrientDB export file format</a></li>
<li><strong>graphml</strong>, for <a href="https://en.wikipedia.org/wiki/GraphML">Graph XML</a></li>
<li><strong>graphson</strong>, for <a href="https://github.com/tinkerpop/blueprints/wiki/GraphSON-Reader-and-Writer-Library">Graph JSON</a></li>
<li><strong><code>&lt;inputy-file&gt;</code></strong> Defines the path to the file you want to import.</li>
<li><strong><code>-preserveClusterIDs</code></strong> Defines whether you want to preserve cluster ID's during the import.  When turned off, the import creates temporary cluster ID's, which can sometimes fail.  This option is only valid with PLocal storage.</li>
<li><strong><code>-deleteRIDMapping</code></strong> Defines whether you want to preserve the dictionary index used by the import to map old RIDs to new RIDs. The index name is <code>___exportImportRIDMap</code> and you could use in your application.  By default the index is removed after the import.</li>
<li><strong><code>-merge</code></strong> Defines whether you want to merge the import with the data already in the current database.  When turned off, the default, the import overwrites current data, with the exception of security classes, (<code>ORole</code>, <code>OUser</code>, <code>OIdentity</code>), which it always preserves.  This feature was introduced in version 1.6.1.</li>
<li><strong><code>-migrateLinks</code></strong> Defines whether you want to migrate links after the import.  When enabled, this updates all references from the old links to the new Record ID's.  By default, it is enabled.  Advisable that you only turn it off when merging and you're certain no other existent records link to those you're importing.  This feature was introduced in version 1.6.1.</li>
<li><strong><code>-rebuildIndexes</code></strong> Defines whether you want to rebuild indexes after the import.  By default, it does.  You can set it to false to speed up the import, but do so only when you're certain the import doesn't affect indexes.  This feature was introduced in version 1.6.1.</li>
</ul>
<p><strong>Example</strong></p>
<ul>
<li>
<p>Import the database <code>petshop.export</code>:</p>
<pre>
orientdb> <code class='lang-sql userinput'>IMPORT DATABASE C:/temp/petshop.export -preserveClusterIDs=true</code>

Importing records...
- Imported records into the cluster 'internal': 5 records
- Imported records into the cluster 'index': 4 records
- Imported records into the cluster 'default': 1022 records
- Imported records into the cluster 'orole': 3 records
- Imported records into the cluster 'ouser': 3 records
- Imported records into the cluster 'csv': 100 records
- Imported records into the cluster 'binary': 101 records
- Imported records into the cluster 'account': 1005 records
- Imported records into the cluster 'company': 9 records
- Imported records into the cluster 'profile': 9 records
- Imported records into the cluster 'whiz': 1000 records
- Imported records into the cluster 'address': 164 records
- Imported records into the cluster 'city': 55 records
- Imported records into the cluster 'country': 55 records
- Imported records into the cluster 'animalrace': 3 records
- Imported records into the cluster 'ographvertex': 102 records
- Imported records into the cluster 'ographedge': 101 records
- Imported records into the cluster 'graphcar': 1 records
</pre>
</li>
</ul>
<blockquote>
<p>For more information on backups, restores, and exports, see: <a href="Console-Command-Backup.html"><code>BACKUP</code></a>, <a href="Console-Command-Restore.html"><code>RESTORE</code></a> and <a href="Console-Command-Export.html"><code>EXPORT</code></a> commands, and the <a href="https://github.com/orientechnologies/orientdb/blob/master/core/src/main/java/com/orientechnologies/orient/core/db/tool/ODatabaseImport.java"><code>ODatabaseImport</code></a>
Java class.  For the JSON format, see <a href="../admin/Export-Format.html">Export File Format</a>.</p>
</blockquote>
<blockquote>
<p>For more information on other commands, see <a href="Console-Commands.html">Console Commands</a>.</p>
</blockquote>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="validation-errors"><a class="header" href="#validation-errors">Validation Errors</a></h3>
<p>Occasionally, you may encounter validation errors during imports, usually shown as an <code>OValidationException</code> exception.  Beginning with version 2.2, you can disable validation at the database-level using the <a href="../sql/SQL-Alter-Database.html"><code>ALTER DATABASE</code></a> command, to allow the import to go through.</p>
<ol>
<li>
<p>Disable validation for the current database:</p>
<pre>
orientdb> <code class="lang-sql userinput">ALTER DATABASE validation false</code>
</pre>
</li>
<li>
<p>Import the exported database:</p>
<pre>
orientdb> <code class="lang-sql userinput">IMPORT DATABASE /path/to/my_data.export -preserveClusterIDs=TRUE</code>
</pre>
</li>
<li>
<p>Re-enable validation:</p>
<pre>
orientdb> <code class="lang-sql userinput">ALTER DATABASE validation true</code>
</pre>
</li>
</ol>
<h3 id="cluster-ids"><a class="header" href="#cluster-ids">Cluster ID's</a></h3>
<p>During imports you may occasionally encounter an error that reads: <code>Imported cluster 'XXX' has id=6 different from the original: 5</code>.  Typically occurs in databases that were created in much older versions of OrientDB.  You can correct it using the <a href="../sql/SQL-Drop-Class.html"><code>DROP CLASS</code></a> on the class <code>ORIDs</code>, then attempting the import again.</p>
<ol>
<li>
<p>Import the database:</p>
<pre>
orientdb> <code class="lang-sql userinput">IMPORT DATABASE /path/to/old_data.export</code>

</li>
</ol>
<p>Importing records...</p>
<ul>
<li>
<p>Creating cluster 'company'...Error on database import happened just before line
16, column 52 com.orientechnologies.orient.core.exception.OConfigurationException:
Imported cluster 'company has id=6 different from the original: 5 at
com.orientechnologies.orient.core.db.tool.ODatabaseImport.importClusters(
ODatabaseImport.java:500) at
com.orientechnologies.orient.core.db.tool.ODatabaseIMport.importDatabase(
ODatabaseImport.java:121)
</pre></p>
</li>
<li>
<p>Drop the <code>ORIDs</code> class:</p>
<pre>
orientdb> <code class="lang-sql userinput">DROP CLASS ORIDs</code>
</pre>
</li>
<li>
<p>Import the database:</p>
 <pre>
 orientdb> <code class="lang-sql userinput">IMPORT DATABASE /path/to/old_data.export</code>
 </pre>
</li>
</ul>
<p>The database now imports without error.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../console/Console-Command-Get.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../console/Console-Command-Indexes.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../console/Console-Command-Get.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../console/Console-Command-Indexes.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
