<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>CSV Serialization - OrientDB</title>


        <!-- Custom HTML head -->

        <meta name="description" content="OrientDB documentation">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">OrientDB</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="csv-serialization"><a class="header" href="#csv-serialization">CSV Serialization</a></h1>
<p>The CSV serialzation is the format how record are serialized in the orientdb 0.*  and 1.* version.</p>
<p>Documents are serialized in a proprietary format (as a string) derived from JSON, but more compact. The string retrieved from the storage could be filled with spaces. This is due to the oversize feature if it is set. Just ignore the tailing spaces.</p>
<p>To know more about types look at <a href="../general/Types.html">Supported types</a>.</p>
<p>These are the rules:</p>
<ul>
<li>Any string content must escape some characters:</li>
<li><code>" -&gt; "</code></li>
<li><code>\ -&gt; \</code></li>
<li>The <strong>class</strong>, if present, is at the begin and must end with <code>@</code>. E.g. <code>Customer@</code></li>
<li>Each <strong>Field</strong> must be present with its name and value separated by <code>:</code>. E.g.<code>name:"Barack"</code></li>
<li><strong>Fields</strong> must be separated by <code>,</code>. E.g. <code>name:"Barack",surname:"Obama"</code></li>
<li>All <strong>Strings</strong> must be enclosed by <code>"</code> character. E.g. <code>city:"Rome"</code></li>
<li>All <strong>Binary</strong> content (like byte[must be encoded in Base64 and enclosed by underscore <code>_</code> character. E.g. <code>buffer:<em>AAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGx</em></code>. Since v1.0rc7</li>
<li><em>Numbers</em> (integer, long, short, byte, floats, double) are formatted as strings as ouput by the Java toString() method. No thousands separator must be used. The decimal separator is always <code>.</code> Starting from version 0.9.25, if the type is not integer, a suffix is used to distinguish the right type when unmarshalled: b=byte, s=short, l=long, f=float, d=double, c=BigDecimal (since 1.0rc8). E.g. <code>salary:120.3f</code> or <code>code:124b</code>.</li>
<li>Output of <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Float.html#toString%28float%29">Floats</a></li>
<li>Output of <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#toString%28double%29">Doubles</a></li>
<li>Output of <a href="http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html#toPlainString%28%29">BigDecimal</a></li>
<li><strong>Booleans</strong> are expressed as <code>true</code> and <code>false</code> always in lower-case. They are recognized as boolean since the text has no double quote as is the case with strings</li>
<li><strong>Dates</strong> must be in the POSIX format (also called UNIX format: http://en.wikipedia.org/wiki/Unix_time). Are always stored as longs but end with:</li>
<li>the 't' character when it's DATETIME type (default in schema-less mode when a Date object is used). Datetime handles the maximum precision up to milliseconds. E.g. <code>lastUpdate:1296279468000t</code> is read as 2011-01-29 05:37:48</li>
<li>the 'a' character when it's DATE type. Date handles up to day as precision. E.g. <code>lastUpdate:1306281600000a</code> is read as 2011-05-25 00:00:00 (Available since 1.0rc2)</li>
<li><strong><a href="../datamodeling/Concepts.html#record-id">RecordID</a></strong> (link) must be prefixed by <code>#</code>. A Record Id always has the format <code>&lt;cluster-id&gt;:&lt;cluster-position&gt;</code>. E.g. <code>location:#3:2</code></li>
<li><strong>Embedded</strong> documents are enclosed by parenthesis <code>(</code> and <code>)</code> characters. E.g. <code>(name:"rules")</code>. <em>Note: before SVN revision 2007 (0.9.24-snapshot) only <code></em></code> characters were used to begin and end the embedded document.*</li>
<li><strong>Lists</strong> (array and list) must be enclosed by <code>[</code> and <code>]</code> characters. E.g. <code>[1,2,3]</code>, <code>[#10:3,#10:4]</code> and <code>[(name:"Luca")]</code>. Before rel.15 SET type was stored as a list, but now it uses own format (see below)</li>
<li><strong>Sets</strong> (collections without duplicates) must be enclosed by <code>&lt;</code> and <code>&gt;</code> characters. E.g. <code>&lt;1,2,3&gt;</code>, <code>&lt;#10:3,#10:4&gt;</code> and <code>&lt;(name:"Luca")&gt;</code>. There is a special case when use LINKSET type reported in detail in <a href="Network-Binary-Protocol.html#special-use-of-linkset-types">Special use of LINKSET types</a> section. Before rel.15 SET type was stored as a list (see upon).</li>
<li><strong>Maps</strong> (as a collection of entries with key/value) must be enclosed in <code>{</code> and <code>}</code> characters. E.g. <code>rules:{"database":2,"database.cluster.internal":2&lt;/code&gt;}</code> (NB. to set a value part of a key/value pair, set it to the text "null", without quotation marks. Eg. <code>rules:{"database_name":"fred","database_alias":null}</code>)</li>
<li><strong>RidBags</strong> a special collection for link management. Represented as <code>%(content:binary);</code> where the content is binary data encoded in base64. Take a look at <a href="RidBag.html">the main page</a> for more details.</li>
<li><strong>Null</strong> fields have an empty value part of the field. E.g. <code>salary_cloned:,salary:</code></li>
</ul>
<pre><code>[&lt;class&gt;@][,][&lt;field-name&gt;:&lt;field-value&gt;]*
</code></pre>
<p>Simple example (line breaks introduced so it's visible on this page):</p>
<pre><code>Profile@nick:"ThePresident",follows:[],followers:[#10:5,#10:6],name:"Barack",surname:"Obama",
location:#3:2,invitedBy:,salary_cloned:,salary:120.3f
</code></pre>
<p>Complex example used in schema (line breaks introduced so it's visible on this page):</p>
<pre><code>name:"ORole",id:0,defaultClusterId:3,clusterIds:[3],properties:[(name:"mode",type:17,offset:0,
mandatory:false,notNull:false,min:,max:,linkedClass:,
linkedType:,index:),(name:"rules",type:12,offset:1,mandatory:false,notNull:false,min:,
max:,linkedClass:,linkedType:17,index:)]
</code></pre>
<p>Other example of ORole that uses a map (line breaks introduced so it's visible on this page):</p>
<pre><code>ORole@name:"reader",inheritedRole:,mode:0,rules:{"database":2,"database.cluster.internal":2,"database.cluster.orole":2,"database.cluster.ouser":2,
"database.class.*":2,"database.cluster.*":2,"database.query":2,"database.command":2,
"database.hook.record":2}
</code></pre>
<h1 id="serialization"><a class="header" href="#serialization">Serialization</a></h1>
<p>Below the serialization of types in JSON and Binary format (always refers to latest version of the protocol).</p>
<div class="table-wrapper"><table><thead><tr><th>Type</th><th>JSON format</th><th>Binary descriptor</th></tr></thead><tbody>
<tr><td>String</td><td>0</td><td>Value ends with 'b'. Example: 23b</td></tr>
<tr><td>Short</td><td>10000</td><td>Value ends with 's'. Example: 23s</td></tr>
<tr><td>Integer</td><td>1000000</td><td>Just the value. Example: 234392</td></tr>
<tr><td>Long</td><td>1000000000</td><td>Value ends with 'l'. Example: 23439223l</td></tr>
<tr><td>Float</td><td>100000.33333</td><td>Value ends with 'f'. Example: 234392.23f</td></tr>
<tr><td>Double</td><td>100.33</td><td>Value ends with 'd'. Example: 10020.2302d</td></tr>
<tr><td>Decimal</td><td>1000.3333</td><td>Value ends with 'c'. Example: 234.923c</td></tr>
<tr><td>Boolean</td><td>true</td><td>'true' or 'false'. Example: true</td></tr>
<tr><td>Date</td><td>1436983328000</td><td>Value in milliseconds ends with 'a'. Example: 1436983328000a</td></tr>
<tr><td>Datetime</td><td>1436983328000</td><td>Value in milliseconds ends with 't'. Example: 1436983328000t</td></tr>
<tr><td>Binary</td><td>base64 encoded binary, like: "A3ERjRFdc0023Kc"</td><td>Bytes surrounded with <code>_</code> characters. Example: <code>_</code>2332322<code>_</code></td></tr>
<tr><td>Link</td><td>#10:3</td><td>Just the RID. Example: #10:232</td></tr>
<tr><td>Link list</td><td><code>[#10:3, #10:4]</code></td><td>Collections values separated by commas and surrounded by brackets "[ ]". Example: [#10:3, #10:6]</td></tr>
<tr><td>Link set</td><td>Example: <code>[#10:3, #10:6]</code></td><td>Example: <code>&lt;#10:3, #10:4&gt;</code></td></tr>
<tr><td>Link map</td><td>Example: <code>{ "name" : "#10:3" }</code></td><td>Map entries separated by commas and surrounded by curly braces "{ }". Example: <code>{"Jay":#10:3,"Mike":#10:6}</code></td></tr>
<tr><td>Embedded</td><td><code>{"Jay":"#10:3","Mike":"#10:6"}</code></td><td>Embedded document serialized surrounded by parenthesis "( )". Example: <code>({"Jay":#10:3,"Mike":#10:6})</code></td></tr>
<tr><td>Embedded list</td><td>Example: <code>[20, 30]</code></td><td>Collections of values separated by commas and surrounded by brackets "[ ]". Example: <code>[20, 30]</code></td></tr>
<tr><td>Embedded set</td><td><code>['is', 'a', 'test']</code></td><td>Collections of values separated by commas and surrounded by minor and major "&lt;&gt;". Example: <code>&lt;20, 30&gt;</code></td></tr>
<tr><td>Embedded map</td><td><code>{ "name" : "Luca" }</code></td><td>Map of values separated by commas and surrounded by curly braces "{ }". Example: <code>{"key1":23,"key2":2332}</code></td></tr>
<tr><td>Custom</td><td>base64 encoded binary, like: "A3ERjRFdc0023Kc"</td><td>-</td></tr>
</tbody></table>
</div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../internals/Network-Binary-Protocol.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../internals/Record-Schemaless-Binary-Serialization.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../internals/Network-Binary-Protocol.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../internals/Record-Schemaless-Binary-Serialization.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
