<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Managing Dates - OrientDB</title>


        <!-- Custom HTML head -->

        <meta name="description" content="OrientDB documentation">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">OrientDB</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- proofread 2015-11-26 SAM -->
<h1 id="managing-dates"><a class="header" href="#managing-dates">Managing Dates</a></h1>
<p>OrientDB treats dates as first class citizens. Internally, it saves dates in the <a href="https://en.wikipedia.org/wiki/Unix_time">Unix time</a> format.  Meaning, it stores dates as a <code>long</code> variable, which contains the count in milliseconds since the Unix Epoch, (that is, 1 January 1970).</p>
<h2 id="date-and-datetime-formats"><a class="header" href="#date-and-datetime-formats">Date and Datetime Formats</a></h2>
<p>In order to make the internal count from the Unix Epoch into something human readable, OrientDB formats the count into date and datetime formats.  By default, these formats are:</p>
<ul>
<li>Date Format: <code>yyyy-MM-dd</code></li>
<li>Datetime Format: <code>yyyy-MM-dd HH:mm:ss</code></li>
</ul>
<p>In the event that these default formats are not sufficient for the needs of your application, you can customize them through <a href="../sql/SQL-Alter-Database.html"><code>ALTER DATABASE...DATEFORMAT</code></a> and <a href="../sql/SQL-Alter-Database.html"><code>DATETIMEFORMAT</code></a> commands.  For instance,</p>
<pre>
orientdb> <code class="lang-sql userinput">ALTER DATABASE DATEFORMAT "dd MMMM yyyy"</code>
</pre>
<p>This command updates the current database to use the English format for dates.  That is, 14 Febr 2015.</p>
<h2 id="sql-functions-and-methods"><a class="header" href="#sql-functions-and-methods">SQL Functions and Methods</a></h2>
<p>To simplify the management of dates, OrientDB SQL automatically parses dates to and from strings and longs.  These functions and methods provide you with more control to manage dates:</p>
<div class="table-wrapper"><table><thead><tr><th>SQL</th><th>Description</th></tr></thead><tbody>
<tr><td><a href="../sql/SQL-Functions.html#date"><code>DATE()</code></a></td><td>Function converts dates to and from strings and dates, also uses custom formats.</td></tr>
<tr><td><a href="../sql/SQL-Functions.html#sysdate"><code>SYSDATE()</code></a></td><td>Function returns the current date.</td></tr>
<tr><td><a href="../sql/SQL-Methods.html#format"><code>.format()</code></a></td><td>Method returns the date in different formats.</td></tr>
<tr><td><a href="../sql/SQL-Methods.html#asdate"><code>.asDate()</code></a></td><td>Method converts any type into a date.</td></tr>
<tr><td><a href="../sql/SQL-Methods.html#asdatetime"><code>.asDatetime()</code></a></td><td>Method converts any type into datetime.</td></tr>
<tr><td><a href="../sql/SQL-Methods.html#aslong"><code>.asLong()</code></a></td><td>Method converts any date into long format, (that is, Unix time).</td></tr>
</tbody></table>
</div>
<p>For example, consider a case where you need to extract only the years for date entries and to arrange them in order.  You can use the <a href="../sql/SQL-Methods.html#format"><code>.format()</code></a> method to extract dates into different formats.</p>
<pre>
orientdb> <code class="lang-sql userinput">SELECT @RID, id, date.format('yyyy') AS year FROM Order</code>

--------+----+------+
 @RID   | id | year |
--------+----+------+
 #31:10 | 92 | 2015 |
 #31:10 | 44 | 2014 |
 #31:10 | 32 | 2014 |
 #31:10 | 21 | 2013 |
--------+----+------+
</pre>
<p>In addition to this, you can also group the results. For instance, extracting the number of orders grouped by year.</p>
<pre>
orientdb> <code class="lang-sql userinput">SELECT date.format('yyyy') AS Year, COUNT(*) AS Total 
          FROM Order ORDER BY Year</code>

------+--------+
 Year |  Total |
------+--------+
 2015 |      1 |
 2014 |      2 |
 2013 |      1 |
------+--------+
</pre>
<h2 id="dates-before-1970"><a class="header" href="#dates-before-1970">Dates before 1970</a></h2>
<p>While you may find the default system for managing dates in OrientDB sufficient for your needs, there are some cases where it may not prove so.  For instance, consider a database of archaeological finds, a number of which date to periods not only before 1970 but possibly even before the Common Era.  You can manage this by defining an era or epoch variable in your dates.</p>
<p>For example, consider an instance where you want to add a record noting the date for the foundation of Rome, which is traditionally referred to as April 21, 753 BC.  To enter dates before the Common Era, first run the [<code>ALTER DATABASE DATETIMEFORMAT</code>] command to add the <code>GG</code> variable to use in referencing the epoch.</p>
<pre>
orientdb> <code class="lang-sql userinput">ALTER DATABASE DATETIMEFORMAT "yyyy-MM-dd HH:mm:ss GG"</code>
</pre>
<p>Once you've run this command, you can create a record that references date and datetime by epoch.</p>
<pre>
orientdb> <code class="lang-sql userinput">CREATE VERTEX V SET city = "Rome", date = DATE("0753-04-21 00:00:00 BC")</code>
orientdb> <code class="lang-sql userinput">SELECT @RID, city, date FROM V</code>

-------+------+------------------------+
 @RID  | city | date                   |
-------+------+------------------------+
 #9:10 | Rome | 0753-04-21 00:00:00 BC |
-------+------+------------------------+
</pre>
<h3 id="using-format-on-insertion"><a class="header" href="#using-format-on-insertion">Using <code>.format()</code> on Insertion</a></h3>
<p>In addition to the above method, instead of changing the date and datetime formats for the database, you can format the results as you insert the date.</p>
<pre>
orientdb> <code class="lang-sql userinput">CREATE VERTEX V SET city = "Rome", date = DATE("yyyy-MM-dd HH:mm:ss GG")</code>
orientdb> <code class="lang-sql userinput">SELECT @RID, city, date FROM V</code>

------+------+------------------------+
 @RID | city | date                   |
------+------+------------------------+
 #9:4 | Rome | 0753-04-21 00:00:00 BC |
------+------+------------------------+
</pre>
<p>Here, you again create a vertex for the traditional date of the foundation of Rome.  However, instead of altering the database, you format the date field in <a href="../sql/SQL-Create-Vertex.html"><code>CREATE VERTEX</code></a> command.</p>
<h3 id="viewing-unix-time"><a class="header" href="#viewing-unix-time">Viewing Unix Time</a></h3>
<p>In addition to the formatted date and datetime, you can also view the underlying count from the Unix Epoch, using the <a href="../sql/SQL-Methods.html#aslong"><code>asLong()</code></a> method for records.  For example,</p>
<pre>
orientdb> <code class='lang-sql userinput'>SELECT @RID, city, date.asLong() FROM #9:4</code>

------+------+------------------------+
 @RID | city | date                   |
------+------+------------------------+
 #9:4 | Rome | -85889120400000        |
------+------+------------------------+
</pre>
<p>Meaning that, OrientDB represents the date of April 21, 753 BC, as -85889120400000 in Unix time.  You can also work with dates directly as longs.</p>
<pre>
orientdb> <code class="lang-sql userinput">CREATE VERTEX V SET city = "Rome", date = DATE(-85889120400000)</code>
orientdb> <code class="lang-sql userinput">SELECT @RID, city, date FROM V</code>

-------+------+------------------------+
 @RID  | city | date                   |
-------+------+------------------------+
 #9:11 | Rome | 0753-04-21 00:00:00 BC |
-------+------+------------------------+
</pre>
<h3 id="use-iso-8601-dates"><a class="header" href="#use-iso-8601-dates">Use ISO 8601 Dates</a></h3>
<p>According to ISO 8601, Combined date and time in UTC: 2014-12-20T00:00:00. To use this standard change the datetimeformat in the database:</p>
<pre><code class="language-sql">ALTER DATABASE DATETIMEFORMAT "yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../indexing/Spatial-Index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../internals/Transactions.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../indexing/Spatial-Index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../internals/Transactions.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
