<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Backup and Restore - OrientDB</title>


        <!-- Custom HTML head -->

        <meta name="description" content="OrientDB documentation">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">OrientDB</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="backup--restore"><a class="header" href="#backup--restore">Backup &amp; Restore</a></h1>
<p>OrientDB supports backup and and restore operations, like any database management system.</p>
<p>The <a href="../console/Console-Command-Backup.html"><code>BACKUP DATABASE</code></a> command executes a complete backup on the currently open database.  It compresses the backup the backup using the ZIP algorithm.  To restore the database from the subsequent <code>.zip</code> file, you can use the <a href="../console/Console-Command-Restore.html"><code>RESTORE DATABASE</code></a> command.</p>
<p>Backups and restores are much faster than the <a href="../console/Console-Command-Export.html"><code>EXPORT DATABASE</code></a> and <a href="../console/Console-Command-Import.html"><code>IMPORT DATABASE</code></a> commands.  You can also automate backups using the <a href="../plugins/Automatic-Backup.html">Automatic Backup</a> server plugin.  Additionally, beginning with version 2.2 of <a href="../ee/Enterprise-Edition.html">Enterprise Edition</a> OrientDB introduces major support for <a href="Incremental-Backup-And-Restore.html">incremental backups</a>.</p>
<blockquote>
<p><strong>NOTE</strong>: OrientDB Community Edition does not support backing up remote databases.  OrientDB <a href="http://www.orientechnologies.com/orientdb-enterprise/">Enterprise Edition</a> does support this feature.  For more information on how to implement this with Enterprise Edition, see <a href="http://www.orientechnologies.com/enterprise/last/servermanagement.html">Remote Backups</a>.</p>
</blockquote>
<h2 id="backups-versus-exports"><a class="header" href="#backups-versus-exports">Backups versus Exports</a></h2>
<p>During backups, the <a href="../console/Console-Command-Backup.html"><code>BACKUP DATABASE</code></a> command produces a consistent copy of the database.  During this process, the database locks all write operations, waiting for the backup to finish.  If you need perform reads and writes on the database during backups, set up a distributed cluster of nodes.  To access to the non blocking backup feature, use the <a href="Incremental-Backup-And-Restore.html">Enterprise Edition</a>.</p>
<p>By contrast, the <a href="../console/Console-Command-Export.html"><code>EXPORT DATABASE</code></a> command doesn't lock the database, allowing concurrent writes to occur during the export process.  Consequentially, the export may include changes made after you initiated the export, which may result in inconsistencies.</p>
<h2 id="using-the-backup-script"><a class="header" href="#using-the-backup-script">Using the Backup Script</a></h2>
<p>Beginning in version 1.7.8, OrientDB introduces a <code>backup.sh</code> script found in the <code>$ORIENTDB_HOME/bin</code> directory.  This script allows you to initiate backups from the system console.</p>
<p><strong>Syntax</strong></p>
<pre><code>./backup.sh &lt;db-url&gt; &lt;user&gt; &lt;password&gt; &lt;destination&gt; [&lt;type&gt;]
</code></pre>
<ul>
<li><strong><code>&lt;db-url&gt;</code></strong> Defines the URL for the database to backup.</li>
<li><strong><code>&lt;user&gt;</code></strong> Defines the user to run the backup.</li>
<li><strong><code>&lt;password&gt;</code></strong> Defines the password for the user.</li>
<li><strong><code>&lt;destination&gt;</code></strong> Defines the path to the backup file the script creates, (use the <code>.zip</code> extension).</li>
<li><strong><code>&lt;type&gt;</code></strong> Defines the backup type.  Supported types:
<ul>
<li><em><code>default</code></em> Locks the database during the backup.</li>
<li><em><code>lvm</code></em> Executes an LVM copy-on-write snapshot in the background.</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>NOTE</strong> Non-blocking backups require that the operating system support LVM.  For more information, see</p>
<ul>
<li><a href="http://en.wikipedia.org/wiki/Logical_Volume_Manager_%28Linux%29">LVM</a></li>
<li><a href="http://arstechnica.com/information-technology/2004/10/linux-20041013/">File system snapshots with LVM</a></li>
<li><a href="http://www.tldp.org/HOWTO/LVM-HOWTO/snapshots_backup.html">LVM snapshot backup</a></li>
</ul>
</blockquote>
<p><strong>Examples</strong></p>
<ul>
<li>
<p>Backup a database opened using <code>plocal</code>:</p>
<pre>
$ <code class="lang-sh userinput">$ORIENTDB_HOME/bin/backup.sh plocal:../database/testdb \
      admin adminpasswd \
  	/path/to/backup.zip</code>
</pre>
</li>
<li>
<p>Perform a non-blocking LVM backup, using <code>plocal</code>:</p>
<pre>
$ <code class='lang-sh userinput'>$ORIENTDB_HOME/bin/backup.sh plocal:../database/testdb \
      admin adminpasswd \
  	/path/to/backup.zip \
  	lvm</code>
</pre>
</li>
<li>
<p>Perform a backup using the OrientDB Console with the <a href="../console/Console-Command-Backup.html"><code>BACKUP</code></a> command:</p>
<pre>
orientdb> <code class='lang-sql userinput'>CONNECT PLOCAL:../database/testdb/ admin adminpasswd</code>
orientdb> <code class='lang-sql userinput'>BACKUP DATABASE /path/to/backup.zip</code>

Backup executed in 0.52 seconds.
</pre>
</li>
</ul>
<h2 id="restoring-databases"><a class="header" href="#restoring-databases">Restoring Databases</a></h2>
<p>Once you have created your <code>backup.zip</code> file, you can restore it to the database either through the OrientDB Console, using the <a href="../console/Console-Command-Restore.html"><code>RESTORE DATABASE</code></a> command.</p>
<pre>
orientdb> <code class='lang-sql userinput'>RESTORE DATABASE /backups/mydb.zip</code>

Restore executed in 6.33 seconds
</pre>
<p>Bear in mind that OrientDB does not support merging during restores.  If you need to merge the old data with new writes, instead use <a href="../console/Console-Command-Export.html"><code>EXPORT DATABASE</code></a> and <a href="../console/Console-Command-Export.html"><code>IMPORT DATABASE</code></a> commands, instead.</p>
<blockquote>
<p>For more information, see</p>
<ul>
<li><a href="../console/Console-Command-Backup.html"><code>BACKUP DATABASE</code></a></li>
<li><a href="../console/Console-Command-Restore.html"><code>RESTORE DATABASE</code></a></li>
<li><a href="../console/Console-Command-Export.html"><code>EXPORT DATABASE</code></a></li>
<li><a href="../console/Console-Command-Import.html"><code>IMPORT DATABASE</code></a></li>
<li><a href="../console/Console-Commands.html">Console Commands</a></li>
</ul>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../admin/Functions-Server.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../admin/Incremental-Backup-And-Restore.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../admin/Functions-Server.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../admin/Incremental-Backup-And-Restore.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
