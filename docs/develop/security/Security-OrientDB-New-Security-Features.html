<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Security v2.2 New Features - OrientDB</title>


        <!-- Custom HTML head -->

        <meta name="description" content="OrientDB documentation">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">OrientDB</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="new-security-features---orientdb"><a class="header" href="#new-security-features---orientdb">New Security Features - OrientDB</a></h1>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>The new security features in OrientDB (introduced in release 2.2) provide an extensible framework for adding external authenticators, password validation, LDAP import of database roles and users, advanced auditing capabilities, and syslog support.</p>
<p>The new security system uses a JSON configuration file, located in the <em>config</em> directory.  The default name of the file is <em>security.json</em>, but it can be overridden by setting the "server.security.file" property in <em>orientdb-server-config.xml</em> or by setting the global server property, "server.security.file".</p>
<p>To see the complete configuration options, click here: <a href="Security-Config.html">Security Configuration</a>.</p>
<h2 id="authenticators"><a class="header" href="#authenticators">Authenticators</a></h2>
<p>In addition to the built-in authentication of users that happens inside the database engine, the new OrientDB security system supports multiple types of external <em>authenticators</em>.  Each <em>authenticator</em> implements various methods to support authentication and authorization, among other things.</p>
<p>All <em>authenticators</em> can be configured in the "authentication" section of the <a href="Security-Config.html">security configuration</a>.</p>
<h3 id="current-implementations"><a class="header" href="#current-implementations">Current Implementations</a></h3>
<p>Currently, OrientDB provides a <a href="#okerberosauthenticator">Kerberos authenticator</a>, a <a href="#odefaultpasswordauthenticator">password authenticator</a> for authenticating users in the <em>security.json</em> file, a <a href="#oserverconfigauthenticator">server config authenticator</a> for authenticating users in the <em>orientdb-server-config.xml</em> file, and a <a href="#symmetric-key-authenticator">symmetric key authenticator</a> (Enterprise-only).  Additional <em>authenticators</em> may be provided in the future, and it's very easy to build new ones.</p>
<h4 id="okerberosauthenticator"><a class="header" href="#okerberosauthenticator">OKerberosAuthenticator</a></h4>
<p>This <em>authenticator</em> provides support for Kerberos authentication and full browser SPNEGO support.  See the <a href="Security-Config.html">security configuration</a> page for full details on configuring this <em>authenticator</em> for Kerberos.</p>
<p>Also, see <a href="Security-Kerberos-Client-Examples.html">Kerberos client examples</a> to see how to use the OrientDB clients with Kerberos.</p>
<h4 id="odefaultpasswordauthenticator"><a class="header" href="#odefaultpasswordauthenticator">ODefaultPasswordAuthenticator</a></h4>
<p>The <code>ODefaultPasswordAuthenticator</code> supports adding server users with passwords and resources to the <em>security.json</em> configuration file.  The main purpose of this is to allow having server users in a single file (along with all the other security settings) without having to maintain them in the separate <em>orientdb-server-config.xml</em> file.  See the example in the <a href="Security-Config.html">security configuration</a> page.</p>
<h4 id="oserverconfigauthenticator"><a class="header" href="#oserverconfigauthenticator">OServerConfigAuthenticator</a></h4>
<p>The <code>OServerConfigAuthenticator</code> is similar to <code>ODefaultPasswordAuthenticator</code> in that it supports server users with passwords and resources, but it's designed to be used with the users in the <em>orientdb-server-config.xml</em> configuration file instead.</p>
<h4 id="osystemuserauthenticator"><a class="header" href="#osystemuserauthenticator">OSystemUserAuthenticator</a></h4>
<p>The <code>OSystemUserAuthenticator</code> supports the new <em>system user</em> type that's stored in the system database.</p>
<h4 id="symmetric-key-authenticator"><a class="header" href="#symmetric-key-authenticator">Symmetric Key Authenticator</a></h4>
<p>The <code>Symmetric Key Authenticator</code> provides support for authenticating users via a shared symmetric key.</p>
<p>There are two versions of the <code>Symmetric Key Authenticator</code>, one that enables authenticating server users and one that enables authenticating system users.</p>
<h3 id="chaining-authenticators"><a class="header" href="#chaining-authenticators">Chaining <em>Authenticators</em></a></h3>
<p>What's important to note is that the <em>authenticators</em> can be thought of as being chained together so that if the first <em>authenticator</em> in the list fails to authenticate a user, then the next <em>authenticator</em> in the chain is tried.  This continues until either a user is successfully authenticated or all <em>authenticators</em> are tried.  This "chaining of <em>authenticators</em>" is used for authentication, authorization, retrieving HTTP authentication headers, and several other security features.</p>
<h3 id="default-authentication"><a class="header" href="#default-authentication">Default Authentication</a></h3>
<p>As mentioned previously, OrientDB has a built-in authentication system for each database, and it is enabled by default.  To disable it, set the "allowDefault" property in the "authentication" section of the <em>security.json</em> configuration to false.  When enabled, the built-in authentication acts as a "fallback" if the external <em>authenticators</em> cannot authenticate or authorize a user.</p>
<h2 id="password-validator"><a class="header" href="#password-validator">Password Validator</a></h2>
<p>Another new feature of the security system is a customizable password validator.  The provided validator is called <code>ODefaultPasswordValidator</code> that, when enabled, validates user-chosen passwords based on minimum length and regular expressions.  Which numbers, uppercase letters, and special characters are permitted along with their required count is specified by a regular expression for each.  Like all the security components, the password validator can be extended or completely replaced with a custom password validator component.</p>
<p>See the <a href="Security-Config.html">security configuration</a> page for details on how to configure the password validator.</p>
<h2 id="ldap-import"><a class="header" href="#ldap-import">LDAP Import</a></h2>
<p>Another often-requested feature, importing of LDAP users, is now available as part of OrientDB.  Each database can be configured to import from multiple LDAP domains, each domain may specify multiple LDAP servers, and the users and their corresponding roles can be specified per-domain using a standard LDAP filter.</p>
<p>The <a href="Security-Config.html">security configuration</a> page explains in great details all the options for the default LDAP importer.</p>
<h2 id="auditingsyslog"><a class="header" href="#auditingsyslog">Auditing/Syslog</a></h2>
<p>Enhancements to the auditing component have also been made.  The audit log now supports monitoring of a class being created and dropped as well as when distributed nodes join and leave the cluster.  Additionally, for operating systems that support <em>syslog</em>, a new <em>syslog</em> plug-in has been added for recording auditing events.</p>
<p>See the <a href="Security-Config.html">security configuration</a> page for details on auditing properties.</p>
<h2 id="reloading"><a class="header" href="#reloading">Reloading</a></h2>
<p>The new security system supports dynamic reloading by an HTTP POST request.  The path to the configuration file to use is provided as JSON content.  The provided credentials must have sufficient privileges to reload the security module.</p>
<p>Here's an example using <em>curl</em> with basic authentication:</p>
<pre><code>curl -u root:password -H "Content-Type: application/json" -X POST -d '{ "configFile" : "${ORIENTDB_HOME}/config/security.json" }'  servername:2480/security/reload 
</code></pre>
<p>Here's another example using <em>curl</em> using Kerberos/SPNEGO authentication:</p>
<pre><code>curl --negotiate -u : -H "Content-Type: application/json" -X POST -d '{ "configFile" : "${ORIENTDB_HOME}/config/security.json" }'  servername:2480/security/reload 
</code></pre>
<p>Notice the passed-in JSON "configFile" property.  Any valid security configuration file may be specified here, making testing multiple configurations possible.</p>
<h3 id="reloading-individual-components"><a class="header" href="#reloading-individual-components">Reloading Individual Components</a></h3>
<p>Instead of reloading the entire security system, it's also possible to reload individual security components.</p>
<p>Here's an example using <em>curl</em> with basic authentication:</p>
<pre><code>curl -u root:password -H "Content-Type: application/json" -X POST -d '{ "module" : "auditing", "config" : "{ACTUAL JSON CONTENT}" }'  servername:2480/security/reload 
</code></pre>
<p>Notice, instead of specifying "configFile" you use "config" and the "module" property.</p>
<p>Currently, you can reload the following security components:</p>
<ul>
<li>server</li>
<li>authentication</li>
<li>passwordValidator</li>
<li>ldapImporter</li>
<li>auditing</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../security/Security-New-Security-Features-Code-Changes.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../security/Security-Symmetric-Key-Authentication.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../security/Security-New-Security-Features-Code-Changes.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../security/Security-Symmetric-Key-Authentication.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>


        
        <img referrerpolicy="unsafe-url" src="https://tglman.org/OrientDB/matomo.php?idsite=7&amp;rec=1" style="border:0" alt="" />


        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
