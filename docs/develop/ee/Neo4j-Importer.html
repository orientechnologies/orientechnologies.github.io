<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Neo4j Importer - OrientDB</title>


        <!-- Custom HTML head -->

        <meta name="description" content="OrientDB documentation">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">OrientDB</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <blockquote>
<p>Only users with grant <code>server.importers</code> can see this section</p>
</blockquote>
<h1 id="neo4j-to-orientdb-importer"><a class="header" href="#neo4j-to-orientdb-importer">Neo4j to OrientDB Importer</a></h1>
<p>In Studio 2.2 you can configure the execution of a new plugin, which allows you to import your Neo4j database into OrientDB in few simple steps.</p>
<p>Imported neo4j items are:</p>
<ul>
<li>nodes</li>
<li>relationships</li>
<li>unique constraints</li>
<li>indexes</li>
</ul>
<p><strong>NOTE</strong>: This feature is available both for the <a href="http://orientdb.com/orientdb-enterprise">OrientDB Enterprise Edition</a> and the <a href="http://orientdb.com/download/">OrientDB Community Edition</a>.</p>
<p>This visual tool consists in a wizard composed of 2 simple steps.
Let's have a look at each configuration step.</p>
<h3 id="step-1"><a class="header" href="#step-1">Step 1</a></h3>
<p>In the first step you have to type the following required parameters:</p>
<ul>
<li><code>Database Host</code>, as the address of the host where the neo4j server is available</li>
<li><code>Port</code>, as the port where your neo4j server is listening for new connections via the bolt binary protocol (default port is 7687)</li>
<li><code>User Name</code>, as the username to access the neo4j server</li>
<li><code>Password</code>, as the password to access the neo4j server</li>
</ul>
<p>After you typed all the required parameters for the migration you can test the connection with the source database.</p>
<p><img src="./images/studio-neo4j-importer/studio-neo4jimporter-step1-tryConnection.png" alt="Test Connection" /></p>
<h3 id="step-2"><a class="header" href="#step-2">Step 2</a></h3>
<p>In the second step you have to specify the parameters about the OrientDB target database and some additional info:</p>
<ul>
<li><code>Connection protocol</code>, as the protocol adopted during the migration in order to connect to OrientDB. You have to choose among:
<ul>
<li>plocal: persistent disk-based, where the access is made in the same JVM process</li>
<li>memory: all data remain in memory</li>
</ul>
</li>
<li><code>OrientDB Database Name</code>, as the target database name where the Neo4j database will be migrated. The database will be created by the import tool if not present. In case the database already exists, the Neo4j to OrientDB Importer will behave accordingly to the checkbox below.</li>
<li><code>Log Level</code>, as the level of verbosity printed to the output during the execution. You can choose among:
<ul>
<li>NO</li>
<li>DEBUG</li>
<li>INFO</li>
<li>WARNING</li>
<li>ERROR</li>
</ul>
</li>
<li><code>Overwrite Database</code>, checkbox to overwrite OrientDB target database if it already exists.</li>
<li><code>Create indices on edges</code>, checkbox to create indices on imported edges in OrientDB. In this way an index will be built for each Edge class on <code>'Neo4jRelId'</code> property.</li>
</ul>
<p><img src="./images/studio-neo4j-importer/studio-neo4jimporter-step2.png" alt="Neo4jImporter Step 2" /></p>
<p>Once we have collected all the info, you can run your configured job through the <code>START MIGRATION</code> button, then the job progress monitor will be displayed:</p>
<p><img src="./images/studio-neo4j-importer/studio-neo4jimporter-job-running.png" alt="Job Running" /></p>
<p>At the end of the migration, statistics about the process are reported as shown below:</p>
<p><img src="./images/studio-neo4j-importer/studio-neo4jimporter-job-completed.png" alt="Migration Job Completed" /></p>
<h3 id="migration-details"><a class="header" href="#migration-details">Migration Details</a></h3>
<p>Internally, the <em>Neo4j to OrientDB Importer</em> makes use of:</p>
<ul>
<li>the Neo4j's bolt connector based on the the Bolt binary protocol to read the graph database from Neo4j</li>
<li>the OrientDB's java API to store the graph into OrientDB</li>
</ul>
<p>The migration consists of four phases:</p>
<ul>
<li><strong>Phase 1</strong>: Connection initialization to Neo4j</li>
<li><strong>Phase 2</strong>: Migration of nodes and relationships present in the source graph database</li>
<li><strong>Phase 3</strong>: Schema migration</li>
<li><strong>Phase 4</strong>: Shutdown of the connection to Neo4j and summary info reporting</li>
</ul>
<h4 id="general-migration-details"><a class="header" href="#general-migration-details">General Migration Details</a></h4>
<p>The following are some general migration details that is good to keep in mind:</p>
<ul>
<li>
<p>In case a node in Neo4j has no <em>Label</em>, it will be imported in OrientDB into the Class <em>"GenericClassNeo4jConversion"</em>.</p>
</li>
<li>
<p>In case a node in Neo4j has multiple <em>Labels</em>, it will be imported into the <code>Class</code> <em>"MultipleLabelNeo4jConversion"</em>.</p>
</li>
<li>
<p>List of original Neo4j <em>Labels</em> are stored as properties in the imported OrientDB vertices (property: <em>"Neo4jLabelList"</em>).</p>
</li>
<li>
<p>During the import, a not unique index is created on the property <em>"Neo4jLabelList"</em>. This allows you to query by <em>Label</em> even over nodes migrated into the single <code>Class</code> <em>"MultipleLabelNeo4jConversion"</em>, using queries like:
<code>SELECT FROM V WHERE Neo4jLabelList CONTAINS 'your_label_here'</code> or the equivalent with the <a href="../../sql/SQL-Match.html">MATCH</a> syntax: <code>MATCH {class: V, as: your_alias, where: (Neo4jLabelList CONTAINS 'your_label'} RETURN your_alias</code>.</p>
</li>
<li>
<p>Original Neo4j <code>IDs</code> are stored as properties in the imported OrientDB vertices and edges (<code>Neo4jNodeID</code> for vertices and <code>Neo4jRelID</code> for edges). Such properties can be (manually) removed at the end of the import, if not needed.</p>
</li>
<li>
<p>During the import, an OrientDB index is created on the property <code>Neo4jNodeID</code> for all imported vertex <code>classes</code> (node's <em>Labels</em> in Neo4j). This is to speed up vertices lookup during edge creation. The created indexes can be (manually) removed at the end of the import, if not needed.</p>
</li>
<li>
<p>In case a Neo4j Relationship has the same name of a Neo4j <em>Label</em>, e.g. <em>"RelationshipName"</em>, the <em>Neo4j to OrientDB Importer</em> will import that relationship into OrientDB in the class <code>E_RelationshipName</code> (i.e. prefixing the Neo4j's <code>RelationshipType</code> with an <code>E_</code>).</p>
</li>
<li>
<p>Neo4j Nodes with same <em>Label</em> but different case, e.g. <em>LABEL</em> and <em>LAbel</em> will be aggregated into a single OrientDB vertex <code>Class</code>.</p>
</li>
<li>
<p>Neo4j Relationship with same name but different case, e.g. <em>relaTIONship</em> and <em>RELATIONSHIP</em> will be aggregated into a single OrientDB edge <code>Class</code></p>
</li>
<li>
<p>Migration of Neo4j's <em>"existence"</em> constraints (only available in the Neo4j's Enterprise Edition) is currently not implemented.</p>
</li>
<li>
<p>During the creation of properties in OrientDB, Neo4j <code>Char</code> data type is mapped to a <code>String</code> data type.</p>
</li>
</ul>
<h4 id="details-about-schema-migration"><a class="header" href="#details-about-schema-migration">Details about Schema Migration</a></h4>
<p>The following are some schema-specific migration details that is good to keep in mind:</p>
<ul>
<li>
<p>If in Neo4j there are no constraints nor indexes, and if after we drop, after the migration, the properties and indexes created for internal purposes (<code>Neo4jNodeID</code>, <code>Neo4jRelID</code>, <code>Neo4jLabelList</code> and corresponding indexes), the imported OrientDB database is schemaless.</p>
</li>
<li>
<p>If in Neo4j there are constraints or indexes, the imported OrientDB database is schema-hybrid (with some properties defined). In particular, for any constraint and index:</p>
<pre><code>	- The Neo4j property where the constraint or index is defined on, is determined.

	- A corresponding property is created in OrientDB (hence the schema-hybrid mode).
</code></pre>
</li>
<li>
<p>If a Neo4j unique constraint is found, a corresponding unique index is created in OrientDB</p>
<pre><code>	- In case the creation of the unique index fails, a not unique index will be created. Note: this scenario can happen, by design, when migrating nodes that have multiple _Labels_, as they are imported into a single vertex `Class`).
</code></pre>
</li>
<li>
<p>If a Neo4j index is found, a corresponding (not unique) OrientDB index is created.</p>
</li>
</ul>
<h4 id="migration-best-practices"><a class="header" href="#migration-best-practices">Migration Best Practices</a></h4>
<p>According to the migration logic shown so far, we can define the following best practices, adoptable before the migration towards OrientDB:</p>
<ol>
<li>
<p>Check if you are using <em>Labels</em> with same name but different case, e.g. <em>LABEL</em> and <em>LAbel</em> and if you really need them. If the correct <em>Label</em> is <em>Label</em>, change <em>LABEL</em> and <em>LAbel</em> to <em>Label</em> in the original Neo4j database before the import. If you really cannot change them, be aware that with the current version of the Neo4j to OrientDB Importer such nodes will be aggregated into a single OrientDB vertex <code>Class</code>.</p>
</li>
<li>
<p>Check if you are using relationships with same name but different case, e.g. <em>relaTIONship</em> and <em>RELATIONSHIP</em> and if you really need them. If the correct relationship is <em>Relationship</em>, change <em>relaTIONship</em> and <em>RELATIONSHIP</em> to <em>Relationship</em> before the import. If you really cannot change them, be aware that with the current version of the Neo4j to OrientDB Importer such relationships will be aggregated into a single OrientDB edge <code>Class</code>.</p>
</li>
<li>
<p>Check your constraints and indexes before starting the import. Sometime you have more constraints or indexes than needed, e.g. old ones that you created on <em>Labels</em> that you are not using anymore. These constraints will be migrated as well, so a best practice is to check that you have defined, in Neo4j, only those that you really want to import. To check constraints and indexes in Neo4j, you can type <code>:schema</code> in the Browser and then click on the "play" icon. Please delete the not needed items.</p>
</li>
<li>
<p>Check if you are using nodes with multiple <em>Labels</em>, and if you really need more than one <em>Label</em> on them. Be aware that with current version of the Neo4j to OrientDB Importer such nodes with multiple <em>Labels</em> will be imported into a single OrientDB <code>Class</code> ("<em>MultipleLabelNeo4jConversion</em>").</p>
</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../ee/Teleporter.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../ee/Profiler.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../ee/Teleporter.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../ee/Profiler.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>


        
        <img referrerpolicy="unsafe-url" src="https://tglman.org/OrientDB/matomo.php?idsite=7&amp;rec=1" style="border:0" alt="" />


        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
