<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Create Edge - OrientDB</title>


        <!-- Custom HTML head -->

        <meta name="description" content="OrientDB documentation">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">OrientDB</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="sql---create-edge"><a class="header" href="#sql---create-edge">SQL - <code>CREATE EDGE</code></a></h1>
<p>Creates a new edge in the database.</p>
<p><strong>Syntax</strong></p>
<pre><code class="language-sql">CREATE EDGE &lt;class&gt; [CLUSTER &lt;cluster&gt;] [UPSERT] FROM &lt;rid&gt;|(&lt;query&gt;)|[&lt;rid&gt;]* TO &lt;rid&gt;|(&lt;query&gt;)|[&lt;rid&gt;]*
                    [SET &lt;field&gt; = &lt;expression&gt;[,]*]|CONTENT {&lt;JSON&gt;}
                    [RETRY &lt;retry&gt; [WAIT &lt;pauseBetweenRetriesInMs]] [BATCH &lt;batch-size&gt;]
</code></pre>
<ul>
<li><strong><code>&lt;class&gt;</code></strong> Defines the class name for the edge.  Use the default edge class <code>E</code> in the event that you don't want to use sub-types.</li>
<li><strong><code>&lt;cluster&gt;</code></strong> Defines the cluster in which you want to store the edge.</li>
<li><strong><code>UPSERT</code></strong> (since v 3.0.1) allows to skip the creation of edges that already exist between two vertices (ie. a unique edge for a couple of vertices). This works only if the edge class has a UNIQUE index on <code>out, in</code> fields, otherwise the statement fails.</li>
<li><strong><code>JSON</code></strong> Provides JSON content to set as the record.  Use this instead of entering data field by field.</li>
<li><strong><code>RETRY</code></strong> Define the number of retries to attempt in the event of conflict, (optimistic approach).</li>
<li><strong><code>WAIT</code></strong> Defines the time to delay between retries in milliseconds.</li>
<li><strong><code>BATCH</code></strong> Defines whether it breaks the command down into smaller blocks and the size of the batches.  This helps to avoid memory issues when the number of vertices is too high.  By default, it is set to <code>100</code>.  This feature was introduced in version 2.1.3.</li>
</ul>
<p>Edges and Vertices form the main components of a Graph database.  OrientDB supports polymorphism on edges.  The base class for an edge is <code>E</code>.</p>
<p>Beginning with version 2.1, when no edges are created OrientDB throws a <code>OCommandExecutionException</code> error.  This makes it easier to integrate edge creation in transactions.  In such cases, if the source or target vertices don't exist, it rolls back the transaction.  (Prior to 2.1, no such error is thrown.)</p>
<p><strong>Examples</strong></p>
<ul>
<li>
<p>Create an edge of the class <code>E</code> between two vertices:</p>
<pre>
orientdb> <code class="lang-sql userinput">CREATE EDGE FROM #10:3 TO #11:4</code>
</pre>
</li>
<li>
<p>Create a new edge type and an edge of the new type:</p>
<pre>
orientdb> <code class="lang-sql userinput">CREATE CLASS E1 EXTENDS E</code>
orientdb> <code class="lang-sql userinput">CREATE EDGE E1 FROM #10:3 TO #11:4</code>
</pre>
</li>
<li>
<p>Create an edge in a specific cluster:</p>
<pre>
orientdb> <code class="lang-sql userinput">CREATE EDGE E1 CLUSTER EuropeEdges FROM #10:3 TO #11:4</code>
</pre>
</li>
<li>
<p>Create an edge and define its properties:</p>
<pre>
orientdb> <code class="lang-sql userinput">CREATE EDGE FROM #10:3 TO #11:4 SET brand = 'fiat'</code>
</pre>
</li>
<li>
<p>Create an edge of the type <code>E1</code> and define its properties:</p>
<pre>
orientdb> <code class="lang-sql userinput">CREATE EDGE E1 FROM #10:3 TO #11:4 SET brand = 'fiat', name = 'wow'</code>
</pre>
</li>
<li>
<p>Create edges of the type <code>Watched</code> between all action movies in the database and the user Luca, using sub-queries:</p>
<pre>
orientdb> <code class="lang-sql userinput">CREATE EDGE Watched FROM (SELECT FROM account WHERE name = 'Luca') TO 
          (SELECT FROM movies WHERE type.name = 'action')</code>
</pre>
</li>
<li>
<p>Create an edge using JSON content:</p>
<pre>
orientdb> <code class="lang-sql userinput">CREATE EDGE E FROM #22:33 TO #22:55 CONTENT</code> <code class='lang-json userinput'>{ "name": "Jay", 
          "surname": "Miner" }</code>
</pre>
</li>
</ul>
<blockquote>
<p>For more information, see</p>
<ul>
<li><a href="SQL-Create-Vertex.html"><code>CREATE VERTEX</code></a></li>
</ul>
</blockquote>
<h2 id="control-vertices-version-increment"><a class="header" href="#control-vertices-version-increment">Control Vertices Version Increment</a></h2>
<p>Creating and deleting edges causes OrientDB to update versions involved in the vertices.  To avoid this behavior, use the <a href="../internals/RidBag.html">Bonsai Structure</a>.</p>
<p>By default, OrientDB uses Bonsai as soon as it reaches the threshold to optimize operation.  To always use Bonsai on your database, either set this configuration on the JVM or in the <code>orientdb-server-config.xml</code> configuration file.</p>
<pre>
$ <code class="userinput lang-sh">java -DridBag.embeddedToSbtreeBonsaiThreshold=-1</code>
</pre>
<p>Alternatively, in your Java application use the following call before opening the database:</p>
<pre><code class="language-java">OGlobalConfiguration.RID_BAG_EMBEDDED_TO_SBTREEBONSAI_THRESHOLD.setValue(-1);
</code></pre>
<blockquote>
<p>For more information, see <a href="../general/Concurrency.html#concurrency-when-adding-edges">Concurrency on Adding Edges</a>.</p>
</blockquote>
<div class="table-wrapper"><table><thead><tr><th><img src="../images/warning.png" alt="NOTE" /></th><th>When running a distributed database, edge creation can sometimes be done in two steps, (that is, create and update).  This can break some constraints defined in the Edge at the class-level.  To avoid such problems, disable the constraints in the Edge class.  Bear in mind that in distributed mode SB Tree index algorithm is not supported.  You must set <code>ridBag.embeddedToSbtreeBonsaiThreashold=Integer.Max\_VALUE</code> to avoid replication errors</th></tr></thead><tbody>
</tbody></table>
</div>
<h2 id="history"><a class="header" href="#history">History</a></h2>
<h3 id="20"><a class="header" href="#20">2.0</a></h3>
<ul>
<li>Disables <a href="../java/Lightweight-Edges.html">Lightweight Edges</a> in new databases by default.  This command now creates a regular edge.</li>
</ul>
<h3 id="14"><a class="header" href="#14">1.4</a></h3>
<ul>
<li>
<p>Command uses the Blueprints API.  If you are in Java using the <code>OGraphDatabase</code> API, you may experience some differences in how OrientDB manages edges.</p>
<blockquote>
<p>To force the command to work with the older API, change the GraphDB settings, as described in <a href="SQL-Alter-Database.html">Graph backwards compatibility</a>.</p>
</blockquote>
</li>
</ul>
<h3 id="12"><a class="header" href="#12">1.2</a></h3>
<ul>
<li>Implements support for query and collection of Record ID's in the <code>FROM...TO</code> clause.</li>
</ul>
<h3 id="11"><a class="header" href="#11">1.1</a></h3>
<ul>
<li>Initial version.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../sql/SQL-Create-Cluster.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../sql/SQL-Create-Function.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../sql/SQL-Create-Cluster.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../sql/SQL-Create-Function.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>


        
        <img referrerpolicy="unsafe-url" src="https://tglman.org/OrientDB/matomo.php?idsite=7&amp;rec=1" style="border:0" alt="" />


        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
