<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Delete Vertex - OrientDB</title>


        <!-- Custom HTML head -->

        <meta name="description" content="OrientDB documentation">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">OrientDB</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="sql---delete-vertex"><a class="header" href="#sql---delete-vertex">SQL - <code>DELETE VERTEX</code></a></h1>
<p>Removes vertices from the database.  This is the equivalent of the <a href="SQL-Delete.html"><code>DELETE</code></a> command, with the addition of checking and maintaining consistency with edges, removing all cross-references to the deleted vertex in all edges involved.</p>
<p><strong>Syntax</strong></p>
<pre><code class="language-sql">DELETE VERTEX &lt;vertex&gt; [WHERE &lt;conditions&gt;] [LIMIT &lt;MaxRecords&gt;&gt;] [BATCH &lt;batch-size&gt;]
</code></pre>
<ul>
<li><strong><code>&lt;vertex&gt;</code></strong> Defines the vertex that you want to remove, using its Class, Record ID, or through a sub-query using the <code>FROM (&lt;sub-query)</code> clause.</li>
<li><strong><a href="SQL-Where.html"><code>WHERE</code></a></strong> Filter condition to determine which records the command removes.</li>
<li><strong><code>LIMIT</code></strong> Defines the maximum number of records to remove.</li>
<li><strong><code>BATCH</code></strong> Defines how many records the command removes at a time, allowing you to break large transactions into smaller blocks to save on memory usage.  By default, it operates on blocks of 100.</li>
</ul>
<p><strong>Example</strong></p>
<ul>
<li>
<p>Remove the vertex and disconnect all vertices that point towards it:</p>
<pre>
orientdb> <code class="lang-sql userinput">DELETE VERTEX #10:231</code>
</pre>
</li>
<li>
<p>Remove all user accounts marked with an incoming edge on the class <code>BadBehaviorInForum</code>:</p>
<pre>
orientdb> <code class='lang-sql userinput'>DELETE VERTEX Account WHERE in.@Class CONTAINS 
          'BadBehaviorInForum'</code>
</pre>
</li>
<li>
<p>Remove all vertices from the class <code>EmailMessages</code> marked with the property <code>isSpam</code>:</p>
<pre>
orientdb> <code class="lang-sql userinput">DELETE VERTEX EMailMessage WHERE isSpam = TRUE</code>
</pre>
</li>
<li>
<p>Remove vertices of the class <code>Attachment</code>, where the vertex has an edge of the class <code>HasAttachment</code> where the property <code>date</code> is set before 1990 and the vertex <code>Email</code> connected to class <code>Attachment</code> with the condition that its property <code>from</code> is set to <code>bob@example.com</code>:</p>
<pre>
orientdb> <code class="lang-sql userinput">DELETE VERTEX Attachment WHERE in[@Class = 'HasAttachment'].date 
          &lt;= "1990" AND in.out[@Class = "Email"].from = 'some...@example.com'</code>
</pre>
</li>
<li>
<p>Remove vertices in blocks of one thousand:</p>
<pre>
orientdb> <code class="lang-sql userinput">DELETE VERTEX v BATCH 1000</code>
</pre>
<p>This feature was introduced in version 2.1.</p>
</li>
</ul>
<h2 id="quick-deletion-of-an-entire-class"><a class="header" href="#quick-deletion-of-an-entire-class">Quick deletion of an entire class</a></h2>
<p>In the case you want to delete one or more classes of vertices and all the connected edges resides only on particular classes, you could use the <code>TRUNCATE CLASS</code> command against both vertex and edge classes by specifying the <code>UNSAFE</code> keyword. <code>TRUNCATE CLASS</code> is much faster than <code>DELETE VERTEX</code>, because it doesn't take in consideration the removal of the edges. Use <code>TRUNCATE CLASS</code> only when you are certain that there will not be broken edges on other vertices instances. Example of deleting all the instances of vertices classes <code>Email</code> and <code>Attachment</code> and the edge class that connect them <code>HasAttachment</code>:</p>
  <pre>
  orientdb> <code class="lang-sql userinput">TRUNCATE CLASS Email UNSAFE</code>
  orientdb> <code class="lang-sql userinput">TRUNCATE CLASS HasAttachment UNSAFE</code>
  orientdb> <code class="lang-sql userinput">TRUNCATE CLASS Attachment UNSAFE</code>
  </pre>
<h2 id="history"><a class="header" href="#history">History</a></h2>
<h3 id="version-21"><a class="header" href="#version-21">Version 2.1</a></h3>
<ul>
<li>Introduces the optional <code>BATCH</code> clause for managing batch size on the operation.</li>
</ul>
<h3 id="version-14"><a class="header" href="#version-14">Version 1.4</a></h3>
<ul>
<li>Command begins using the Blueprints API.  When working in Java using the OGraphDatabase API, you may experience differences in how the database manages edges.  To force the command to work with the older API, change the Graph DB settings using <a href="SQL-Alter-Database.html"><code>ALTER DATABASE</code></a>.</li>
</ul>
<h3 id="version-11"><a class="header" href="#version-11">Version 1.1</a></h3>
<ul>
<li>Initial version.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../sql/SQL-Delete-Edge.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../sql/SQL-Drop-Class.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../sql/SQL-Delete-Edge.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../sql/SQL-Drop-Class.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>


        
        <img referrerpolicy="unsafe-url" src="https://tglman.org/OrientDB/matomo.php?idsite=7&amp;rec=1" style="border:0" alt="" />


        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
