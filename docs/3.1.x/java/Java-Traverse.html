<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Traverse - OrientDB</title>


        <!-- Custom HTML head -->

        <meta name="description" content="OrientDB documentation">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">OrientDB</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="traverse"><a class="header" href="#traverse">Traverse</a></h1>
<p>OrientDB is a Graph database.  This means that its focal point is on relationships, (that is, links), and on managing them. The standard SQL language is not sufficient to work with trees or graphs, as it lacks the concept of recursion.  For this reason, the OrientDB subset of SQL implements a dedicated command for tree traversal: <a href="../sql/SQL-Traverse.html"><code>TRAVERSE</code></a>.</p>
<p>Traversal operations cross relationships between records, (that is, documents, vertices, nodes, and so on).  This operation runs much faster than the Relational database solution of executing a <code>JOIN</code>.</p>
<p>The main concepts in traversal are:</p>
<ul>
<li>
<p><strong>Target</strong>: Defines where you want to begin traversing records, which can be a <a href="../datamodeling/Concepts.html#class">class</a>, <a href="../datamodeling/Concepts.html#cluster">cluster</a>, or a set of records defined by their <a href="../datamodeling/Concepts.html#record-id">Record ID's</a>.</p>
<p>You can also use any sub-query that returns an iterable <code>OIdentifiable</code> object, such as when nesting multiple <a href="../sql/SQL-Query.html"><code>SELECT</code></a> and <a href="../sql/SQL-Traverse.html"><code>TRAVERSE</code></a> queries together.</p>
</li>
<li>
<p><strong>Fields</strong>: Defines the fields you want to traverse.  If you want to traverse all fields in a document, use <code>*</code>, <code>any()</code> or <code>all()</code>.</p>
</li>
<li>
<p><strong>Limit</strong>: Defines the maximum number of records to retrieve.</p>
</li>
<li>
<p><strong>Predicate</strong> Defines an operation you want to execute against each traversed document.  If the predicate returns <code>true</code>, the document is returned, otherwise it is skipped.</p>
</li>
<li>
<p><strong>Strategy</strong>: Defines how you want to traverse the graph, which can be <a href="#depth_first-strategy"><code>DEPTH_FIRST</code></a> or <a href="#breadth_first-strategy"><code>BREADTH_FIRST</code></a>.</p>
</li>
</ul>
<h2 id="traversal-strategies"><a class="header" href="#traversal-strategies">Traversal Strategies</a></h2>
<p>When issuing a traversal query to OrientDB, you can define the particular strategy for the traversal path that it uses.  For instance, OrientDB can traverse down a particular branch to its maximum depth first, then backtrack, or it can traverse each child node then search the next level down.  Which to use depends on the specific needs of your application.</p>
<h3 id="depth_first-strategy"><a class="header" href="#depth_first-strategy"><code>DEPTH_FIRST</code> Strategy</a></h3>
<p>By default, OrientDB traverses to depth first.  That is, it explores as far as possible through each branch before backtracking to the next.</p>
<p>This process is implemented using recursion.  For more information, see <a href="http://en.wikipedia.org/wiki/Depth-first_search">Depth-First algorithm</a>.</p>
<p>The diagram below shows the ordered steps OrientDB executes while traversing a graph using <code>DEPTH_FIRST</code> strategy.</p>
<p><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Depth-first-tree.svg/600px-Depth-first-tree.svg.png" alt="Depth-first-tree" /></p>
<h3 id="breadth_first-strategy"><a class="header" href="#breadth_first-strategy"><code>BREADTH_FIRST</code> Strategy</a></h3>
<p>With this strategy, OrientDB inspects all neighboring nodes, then for each of those neighboring nodes in turn it inspects their neighboring nodes, which were unvisited, and so on.</p>
<p>Compare <strong>BREADTH_FIRST</strong> with the equivalent, but more memory-efficient iterative deepening depth first search and contrast it with <a href="#depth_first-strategy"><code>DEPTH_FIRST</code></a> search. For more information, see <a href="http://en.wikipedia.org/wiki/Breath-first_search">Breadth-First algorithm</a>.</p>
<p>The diagram below shows the ordered steps OrientDB executes while traversing a graph using <code>BREADTH_FIRST</code> strategy.</p>
<p><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/3/33/Breadth-first-tree.svg/600px-Breadth-first-tree.svg.png" alt="Breadth-first-tree" /></p>
<h2 id="context-variables"><a class="header" href="#context-variables">Context Variables</a></h2>
<p>During traversal, OrientDB provides context variables, which you can use in traversal conditions:</p>
<div class="table-wrapper"><table><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody>
<tr><td><code>$depth</code></td><td>Provides an integer indicating nesting depth in the tree.  The first level is 0.</td></tr>
<tr><td><code>$path</code></td><td>Provides a string representation of the current position as a sum of the traversed nodes.</td></tr>
<tr><td><code>$stack</code></td><td>Provides a stack of the current traversed nodes.</td></tr>
<tr><td><code>$history</code></td><td>Provides the entire collection of visited nodes.</td></tr>
</tbody></table>
</div>
<h2 id="traversal-methods"><a class="header" href="#traversal-methods">Traversal Methods</a></h2>
<p>The following sections describe various traversal methods.</p>
<h3 id="sql-traverse"><a class="header" href="#sql-traverse">SQL Traverse</a></h3>
<p>The simplest method available in executing a traversal is to use the SQL <a href="../sql/SQL-Traverse.html"><code>TRAVERSE</code></a> command.</p>
<p>For example, say that you have a <code>Movie</code> class and you want to retrieve all connected <code>from</code> and <code>to</code> records up to the fifth level in depth.  You might use something like this,</p>
<pre><code class="language-java">for (OIdentifiable id : 
      new OSQLSynchQuery&lt;ODocument&gt;(
         "TRAVERSE in, out FROM Movie WHILE $depth &lt;= 5"
      )) {
   System.out.println(id);
}
</code></pre>
<p>For more information on traversal in SQL, see <a href="../sql/SQL-Traverse.html"><code>TRAVERSE</code></a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../java/Object-2-Record-Java-Binding.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../java/Java-Multi-Threading.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../java/Object-2-Record-Java-Binding.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../java/Java-Multi-Threading.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>


        
        <img referrerpolicy="unsafe-url" src="https://tglman.org/OrientDB/matomo.php?idsite=7&amp;rec=1" style="border:0" alt="" />


        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
