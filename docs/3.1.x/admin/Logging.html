<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Logs - OrientDB</title>


        <!-- Custom HTML head -->

        <meta name="description" content="OrientDB documentation">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">OrientDB</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="logging"><a class="header" href="#logging">Logging</a></h1>
<p>OrientDB handles logs using the Java Logging Framework, which is bundled with the JVM.  The specific format it uses derives from the <code>OLogFormatter</code> class, which defaults to:</p>
<pre><code>&lt;date&gt; &lt;level&gt; &lt;message&gt; [&lt;requester&gt;]
</code></pre>
<ul>
<li><strong><code>&lt;date&gt;</code></strong> Shows the date of the log entry, using the date format <code>YYYY-MM-DD HH:MM:SS:SSS</code>.</li>
<li><strong><code>&lt;level&gt;</code></strong> Shows the log level.</li>
<li><strong><code>&lt;message&gt;</code></strong> Shows the log message.</li>
<li><strong><code>&lt;class&gt;</code></strong> Shows the Java class that made the entry, (optional).</li>
</ul>
<p>The supported levels are those contained in the JRE class <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/logging/Level.html"><code>java.util.logging.Level</code></a>.  From highest to lowest:</p>
<ul>
<li><code>SEVERE</code></li>
<li><code>WARNING</code></li>
<li><code>INFO</code></li>
<li><code>CONFIG</code></li>
<li><code>FINE</code></li>
<li><code>FINER</code></li>
<li><code>FINEST</code></li>
</ul>
<p>By default, OrientDB installs two loggers:</p>
<ul>
<li><strong><code>console</code></strong>: Logs to the shell or command-prompt that starts the application or the server.  You can modify it by setting the <code>log.console.level</code> variable.</li>
<li><strong><code>file</code></strong>: Logs to the log file.  You can modify it by setting the <code>log.file.level</code> variable.</li>
</ul>
<h2 id="configuration-file"><a class="header" href="#configuration-file">Configuration File</a></h2>
<p>You can configure logging strategies and policies by creating a configuration file that follows the
Java <a href="http://www.javapractices.com/topic/TopicAction.do?Id=143">Logging Messages</a> configuration syntax.  For example, consider the following from the <code>orientdb-server-log.properties</code> file:</p>
<pre><code class="language-java"># Specify the handlers to create in the root logger
# (all loggers are children of the root logger)
# The following creates two handlers
handlers = java.util.logging.ConsoleHandler, java.util.logging.FileHandler

# Set the default logging level for the root logger
.level = ALL

# Set the default logging level for new ConsoleHandler instances
java.util.logging.ConsoleHandler.level = INFO
# Set the default formatter for new ConsoleHandler instances
java.util.logging.ConsoleHandler.formatter = com.orientechnologies.common.log.OLogFormatter

# Set the default logging level for new FileHandler instances
java.util.logging.FileHandler.level = INFO
# Naming style for the output file
java.util.logging.FileHandler.pattern=../log/orient-server.log
# Set the default formatter for new FileHandler instances
java.util.logging.FileHandler.formatter = com.orientechnologies.common.log.OLogFormatter
# Limiting size of output file in bytes:
java.util.logging.FileHandler.limit=10000000
# Number of output files to cycle through, by appending an
# integer to the base file name:
java.util.logging.FileHandler.count=10
</code></pre>
<p>When the log properties file is ready, you need to tell the JVM to use t, by setting <code>java.util.logging.config.file</code> system property.</p>
<pre>
$ <code class="lang-sh userinput">java -Djava.util.logging.config.file=mylog.properties</code>
</pre>
<h2 id="setting-the-log-level"><a class="header" href="#setting-the-log-level">Setting the Log Level</a></h2>
<p>To change the log level without modifying the logging configuration, set the <code>log.console.level</code> and <code>log.file.level</code> system variables.  These system variables are accessible both at startup and at runtime.</p>
<h3 id="configuring-log-level-at-startup"><a class="header" href="#configuring-log-level-at-startup">Configuring Log Level at Startup</a></h3>
<p>You can configure log level at startup through both the <code>orientdb-server-config.xml</code> configuration file and by modifying the JVM before you start the server:</p>
<h4 id="using-the-configuration-file"><a class="header" href="#using-the-configuration-file">Using the Configuration File</a></h4>
<p>To configure log level from the configuration file, update the following elements in the <code>&lt;properties&gt;</code> section:</p>
<pre><code class="language-xml">&lt;properties&gt;
   &lt;entry value="info" name="log.console.level" /&gt;
   &lt;entry value="fine" name="log.file.level" /&gt;
   ...
&lt;/properties&gt;
</code></pre>
<h4 id="using-the-jvm"><a class="header" href="#using-the-jvm">Using the JVM</a></h4>
<p>To configure log level from the JVM before starting the server, run the <code>java</code> command to configure the <code>log.console.level</code> and <code>log.file.level</code> variables:</p>
<pre>
$ <code class="lang-sh userinput">java -Dlog.console.level=INFO -Dlog.file.level=FINE</code>
</pre>
<h3 id="configuring-log-level-at-runtime"><a class="header" href="#configuring-log-level-at-runtime">Configuring Log Level at Runtime</a></h3>
<p>You can configure log level at runtime through both the Java API and by executing an HTTP <code>POST</code> against the remote server.</p>
<h4 id="using-java-code"><a class="header" href="#using-java-code">Using Java Code</a></h4>
<p>Through the Java API, you can set the system variables for logging at startup through the <code>System.setProperty()</code> method.  For instance,</p>
<pre><code class="language-java">public void main(String[] args){
  System.setProperty("log.console.level", "FINE");
  ...
}
</code></pre>
<h4 id="using-http-post"><a class="header" href="#using-http-post">Using HTTP POST</a></h4>
<p>Through the HTTP requests, you can update the logging system variables by executing a <code>POST</code> against the URL: <code>/server/log.&lt;type&gt;/&lt;level&gt;</code>.</p>
<ul>
<li><strong><code>&lt;type&gt;</code></strong> Defines the log type: <code>console</code> or <code>file</code>.</li>
<li><strong><code>&lt;level&gt;</code></strong> Defines the log level.</li>
</ul>
<p><strong>Examples</strong></p>
<p>The examples below use <a href="https://en.wikipedia.org/wiki/CURL">cURL</a> to execute the HTTP <code>POST</code> commands against the OrientDB server.  It uses the server <code>root</code> user and password.</p>
<ul>
<li>
<p>Enable the finest tracing level to the console:</p>
<pre>
$ <code class="lang-sh userinput">curl -u root:root -X POST http://localhost:2480/server/log.console/FINEST</code>
</pre>
</li>
<li>
<p>Enable the finest tracing level to file:</p>
<pre>
$ <code class="lang-sh userinput">curl -u root:root -X POST http://localhost:2480/server/log.file/FINEST</code>
</pre>
</li>
</ul>
<h2 id="change-logging-on-the-client"><a class="header" href="#change-logging-on-the-client">Change logging on the client</a></h2>
<p>On the client is the same as for the server, but you should rather configure the file <code>config/orientdb-client-log.properties</code> and add this at your client's JVM:</p>
<pre>
$ <code class="lang-sh userinput">java -Djava.util.logging.config.file=config/orientdb-client-log.properties</code>
</pre>
<h2 id="install-log-formatter"><a class="header" href="#install-log-formatter">Install Log Formatter</a></h2>
<p>OrientDB Server uses its own log formatter.  In order to enable the same for your application, you need to include the following line:</p>
<pre><code class="language-java">OLogManager.installCustomFormatter();
</code></pre>
<p>The Server automatically installs the log formatter.  To disable it, use <code>orientdb.installCustomFormatter</code>.</p>
<pre>
$ <code class="lang-sh userinput">java -Dorientdb.installCustomFormatter=false</code>
</pre>
<h2 id="debugging-logger"><a class="header" href="#debugging-logger">Debugging Logger</a></h2>
<p>Java Logging Framework runtime has a known problem with logging from shutdown hooks, sometimes log entries may be lost. OrientDB uses shutdown hooks to properly shutdown its internals, so it also may be affected by this problem, something may go wrong silently on shutdown. To workaround this problem OrientDB provides a special logger – the debugging logger. To activate it provide following command line argument to your JVM:</p>
<pre><code>-Djava.util.logging.manager=com.orientechnologies.common.log.OLogManager$DebugLogManager
</code></pre>
<blockquote>
<p>Use this logger for debugging and troubleshooting purposes only, since it may interfere with your production logging configuration.</p>
</blockquote>
<blockquote>
<p>Make sure <code>$DebugLogManager</code> part is not interpreted as a shell variable substitution. To avoid the substitution apply escaping specific to your shell environment.</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../release/Upgrading-Distributed-Environment.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../admin/Scheduler.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../release/Upgrading-Distributed-Environment.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../admin/Scheduler.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>


        
        <img referrerpolicy="unsafe-url" src="https://tglman.org/OrientDB/matomo.php?idsite=7&amp;rec=1" style="border:0" alt="" />


        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
