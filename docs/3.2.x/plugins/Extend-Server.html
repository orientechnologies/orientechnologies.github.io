<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Available OrientDB Plugins - OrientDB</title>


        <!-- Custom HTML head -->

        <meta name="description" content="OrientDB documentation">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">OrientDB</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="orientdb-plugins"><a class="header" href="#orientdb-plugins">OrientDB Plugins</a></h1>
<p>The OrientDB Server is a customizable platform to build powerful server component and applications.</p>
<p>Since the OrientDB server contains an integrated Web Server what about creating server side applications without the need to have a J2EE and Servlet container? By extending the server you can benefit of the best performance because you don't have many layers but the database and the application reside on the same JVM without the cost of the network and serialization of requests.</p>
<p>Furthermore you can package your application together with the OrientDB server to distribute just a ZIP file containing the entire Application, Web server and Database.</p>
<p>To customize the OrientDB server you have two powerful tools:</p>
<ul>
<li><a href="#handlers-server-plugins">Handlers</a></li>
<li><a href="#custom-commands">Custom commands</a></li>
</ul>
<p>To debug the server while you develop new feature follow <a href="#debug-the-server">Debug the server</a>.</p>
<h1 id="handlers-server-plugins"><a class="header" href="#handlers-server-plugins">Handlers (Server Plugins)</a></h1>
<p><strong>Handlers</strong> are plug-ins and starts when OrientDB starts.</p>
<p>To create a new handler create the class and register it in the OrientDB server configuration.</p>
<h2 id="create-the-handler-class"><a class="header" href="#create-the-handler-class">Create the Handler class</a></h2>
<p>A Handler must implements the OServerPlugin interface or extends the OServerPluginAbstract abstract class.</p>
<p>Below an example of a handler that print every 5 seconds a message if the "log" parameters has been configured to be "true":</p>
<pre><code class="language-java">package orientdb.test;

public class PrinterHandler extends OServerPluginAbstract {
  private boolean	log = false;

  public void config(OServer oServer, OServerParameterConfiguration[] iParams) {
    for (OServerParameterConfiguration p : iParams) {
      if (p.name.equalsIgnoreCase("log"))
        log = true;
    }

    Orient.getTimer().schedule( new TimerTask() {
      public void run() {
        if( log )
          System.out.println("It's the PrinterHandler!");
      }
    }, 5000, 5000);
  }

  public String getName() {
    return "PrinterHandler";
  }
}
</code></pre>
<h2 id="register-the-handler"><a class="header" href="#register-the-handler">Register the handler</a></h2>
<p>Once created, register it to the server configuration in <strong>orientdb-server-config.xml</strong> file:</p>
<pre><code class="language-xml">&lt;orient-server&gt;
  &lt;handlers&gt;
    &lt;handler class="orientdb.test.PrinterHandler"&gt;
      &lt;parameters&gt;
        &lt;parameter name="log" value="true"/&gt;
      &lt;/parameters&gt;
    &lt;/handler&gt;
  &lt;/handlers&gt;
  ...
</code></pre>
<p>Note that you can specify arbitrary parameters in form of name and value. Those parameters can be read by the <strong>config()</strong> method. In this example a parameter "log" is read. Look upon to the example of handler to know how to read parameters specified in configuration.</p>
<h2 id="steps-to-register-a-function-as-a-plugin-in-orientdb"><a class="header" href="#steps-to-register-a-function-as-a-plugin-in-orientdb">Steps to register a function as a Plugin in OrientDB</a></h2>
<p>In this case we'll create a plugin that only registers one function in OrientDB: <strong>pow</strong> (returns the value of the first argument raised to the power of the second argument). We'll also support <a href="http://en.wikipedia.org/wiki/Modular_exponentiation">Modular exponentiation</a>.</p>
<p>The syntax will be <code>pow(&lt;base&gt;, &lt;power&gt; [, &lt;mod&gt;])</code>.</p>
<ul>
<li>you should have a directory structure like this</li>
</ul>
<pre><code class="language-bash">    .
    ├─ src
    |   └─ main
    |       ├─ assembly
    |       |   └─ assembly.xml 
    |       ├─ java
    |       |   └─ com
    |       |       └─ app
    |       |           └─ OPowPlugin.java
    |       └─ resources
    |           └─ plugin.json 
    |
    └─ pom.xml 
</code></pre>
<h5 id="opowpluginjava"><a class="header" href="#opowpluginjava">OPowPlugin.java</a></h5>
<pre><code class="language-java">package com.app;

import com.orientechnologies.common.log.OLogManager;
import com.orientechnologies.orient.core.command.OCommandContext;
import com.orientechnologies.orient.core.db.record.OIdentifiable;
import com.orientechnologies.orient.core.sql.OSQLEngine;
import com.orientechnologies.orient.core.sql.functions.OSQLFunctionAbstract;
import com.orientechnologies.orient.server.OServer;
import com.orientechnologies.orient.server.config.OServerParameterConfiguration;
import com.orientechnologies.orient.server.plugin.OServerPluginAbstract;
import java.util.ArrayList;
import java.util.List;

public class OPowPlugin extends OServerPluginAbstract {

    public OPowPlugin() {
    }

    public String getName() {
        return "pow-plugin";
    }

    public void startup() {
        super.startup();
        OSQLEngine.getInstance().registerFunction("pow", new OSQLFunctionAbstract("pow", 2, 3) {

            public String getSyntax() {
                return "pow(&lt;base&gt;, &lt;power&gt; [, &lt;mod&gt;])";
            }

            public Object execute(Object iThis, OIdentifiable iCurrentRecord, Object iCurrentResult, final Object[] iParams, OCommandContext iContext) {
                if (iParams[0] == null || iParams[1] == null) {
                    return null;
                }
                if (!(iParams[0] instanceof Number) || !(iParams[1] instanceof Number)) {
                    return null;
                }

                final long base = ((Number) iParams[0]).longValue();
                final long power = ((Number) iParams[1]).longValue();

                if (iParams.length == 3) { // modular exponentiation
                    if (iParams[2] == null) {
                        return null;
                    }
                    if (!(iParams[2] instanceof Number)) {
                        return null;
                    }

                    final long mod = ((Number) iParams[2]).longValue();
                    if (power &lt; 0) {
                        OLogManager.instance().warn(this, "negative numbers as exponent are not supported");
                    }
                    return modPow(base, power, mod);
                }

                return power &gt; 0 ? pow(base, power) : 1D / pow(base, -power);
            }
        });
        OLogManager.instance().info(this, "pow function registered");
    }

    private double pow(long base, long power) {
        double r = 1;
        List&lt;Boolean&gt; bits = bits(power);
        for (int i = bits.size() - 1; i &gt;= 0; i--) {
            r *= r;
            if (bits.get(i)) {
                r *= base;
            }
        }

        return r;
    }

    private double modPow(long base, long power, long mod) {
        double r = 1;
        List&lt;Boolean&gt; bits = bits(power);
        for (int i = bits.size() - 1; i &gt;= 0; i--) {
            r = (r * r) % mod;
            if (bits.get(i)) {
                r = (r * base) % mod;
            }
        }

        return r;
    }

    private List&lt;Boolean&gt; bits(long n) {
        List&lt;Boolean&gt; bits = new ArrayList();
        while (n &gt; 0) {
            bits.add(n % 2 == 1);
            n /= 2;
        }

        return bits;
    }

    public void config(OServer oServer, OServerParameterConfiguration[] iParams) {

    }

    public void shutdown() {
        super.shutdown();
    }
}
</code></pre>
<h5 id="pomxml"><a class="header" href="#pomxml">pom.xml</a></h5>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;com.app&lt;/groupId&gt;
    &lt;artifactId&gt;pow-plugin&lt;/artifactId&gt;
    &lt;version&gt;2.0.7&lt;/version&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;

    &lt;name&gt;pow-plugin&lt;/name&gt;

    &lt;properties&gt;
        &lt;orientdb.version&gt;2.0.7&lt;/orientdb.version&gt;
    &lt;/properties&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;
                &lt;version&gt;2.4&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;descriptors&gt;
                        &lt;descriptor&gt;src/main/assembly/assembly.xml&lt;/descriptor&gt;
                    &lt;/descriptors&gt;
                &lt;/configuration&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;id&gt;make-assembly&lt;/id&gt;
                        &lt;!-- this is used for inheritance merges --&gt;
                        &lt;phase&gt;package&lt;/phase&gt;
                        &lt;!-- bind to the packaging phase --&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;single&lt;/goal&gt;
                        &lt;/goals&gt;
                        &lt;configuration&gt;&lt;/configuration&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.1&lt;/version&gt;
                &lt;configuration&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
    
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.orientechnologies&lt;/groupId&gt;
            &lt;artifactId&gt;orientdb-core&lt;/artifactId&gt;
            &lt;version&gt;${orientdb.version}&lt;/version&gt;
            &lt;scope&gt;compile&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.orientechnologies&lt;/groupId&gt;
            &lt;artifactId&gt;orientdb-server&lt;/artifactId&gt;
            &lt;version&gt;${orientdb.version}&lt;/version&gt;
            &lt;scope&gt;compile&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/project&gt;
</code></pre>
<h5 id="assemblyxml"><a class="header" href="#assemblyxml">assembly.xml</a></h5>
<pre><code class="language-xml">&lt;assembly&gt;
    &lt;id&gt;dist&lt;/id&gt;
    &lt;formats&gt;
        &lt;format&gt;jar&lt;/format&gt;
    &lt;/formats&gt;
    &lt;includeBaseDirectory&gt;false&lt;/includeBaseDirectory&gt;
    &lt;dependencySets&gt;
        &lt;dependencySet&gt;
            &lt;outputDirectory/&gt;
            &lt;unpack&gt;true&lt;/unpack&gt;
            &lt;includes&gt;
                &lt;include&gt;${groupId}:${artifactId}&lt;/include&gt;
            &lt;/includes&gt;
        &lt;/dependencySet&gt;
    &lt;/dependencySets&gt;
&lt;/assembly&gt;
</code></pre>
<h5 id="pluginjson"><a class="header" href="#pluginjson">plugin.json</a></h5>
<pre><code class="language-json">{
	"name" : "pow-plugin",
	"version" : "2.0.7",
	"javaClass": "com.app.OPowPlugin",
	"parameters" : {},
	"description" : "The Pow Plugin",
	"copyrights" : "No copyrights"
}
</code></pre>
<ul>
<li>Build the project and then:</li>
</ul>
<pre><code class="language-bash">cp target/pow-plugin-2.0.7-dist.jar $ORIENTDB_HOME/plugins/
</code></pre>
<p>You should see the following in OrientDB server log:</p>
<pre><code class="language-bash">INFO  Installing dynamic plugin 'pow-plugin-2.0.7-dist.jar'... [OServerPluginManager]
INFO  pow function registered [OPowPlugin]
</code></pre>
<p>And now you can:</p>
<pre><code class="language-bash">orientdb {db=Pow}&gt; select pow(2,10)     

----+------+------
#   |@CLASS|pow   
----+------+------
0   |null  |1024.0
----+------+------

orientdb {db=Pow}&gt; select pow(2,10,5)

----+------+----
#   |@CLASS|pow 
----+------+----
0   |null  |4.0 
----+------+----

</code></pre>
<p>This small project is available <a href="https://www.dropbox.com/s/3o448vbyh5dwx38/pow-plugin.tar.gz?dl=0">here</a>.</p>
<h2 id="creating-a-distributed-change-manager"><a class="header" href="#creating-a-distributed-change-manager">Creating a distributed change manager</a></h2>
<p>As more complete example let's create a distributed record manager by installing hooks to all the server's databases and push these changes to the remote client caches.</p>
<pre><code class="language-java">public class DistributedRecordHook extends OServerHandlerAbstract implements ORecordHook {
  private boolean log = false;

  public void config(OServer oServer, OServerParameterConfiguration[] iParams) {
    for (OServerParameterConfiguration p : iParams) {
      if (p.name.equalsIgnoreCase("log"))
        log = true;
    }
  }

  public void onAfterClientRequest(final OClientConnection iConnection, final byte iRequestType) {
    if (iRequestType == OChannelBinaryProtocol.REQUEST_DB_OPEN)
      iConnection.database.registerHook(this);
    else if (iRequestType == OChannelBinaryProtocol.REQUEST_DB_CLOSE)
      iConnection.database.unregisterHook(this);
  }

  public boolean onTrigger(TYPE iType, ORecord&lt;?&gt; iRecord) {
    try {
      if (log)
        System.out.println("Broadcasting record: " + iRecord + "...");

      OClientConnectionManager.instance().broadcastRecord2Clients((ORecordInternal&lt;?&gt;) iRecord, null);
    } catch (Exception e) {
      e.printStackTrace();
    }
    return false;
  }

  public String getName() {
    return "DistributedRecordHook";
  }
}
</code></pre>
<h1 id="custom-commands"><a class="header" href="#custom-commands">Custom commands</a></h1>
<p>Custom commands are useful when you want to add behavior or business logic at the server side.</p>
<p>A Server command is a class that implements the <a href="https://github.com/orientechnologies/orientdb/blob/2.2.x/server/src/main/java/com/orientechnologies/orient/server/network/protocol/http/command/OServerCommand.java">OServerCommand</a> interface or extends one of the following abstract classes:</p>
<ul>
<li><a href="https://github.com/orientechnologies/orientdb/blob/2.2.x/server/src/main/java/com/orientechnologies/orient/server/network/protocol/http/command/OServerCommandAuthenticatedDbAbstract.java">OServerCommandAuthenticatedDbAbstract</a> if the command requires an authentication at the database</li>
<li><a href="https://github.com/orientechnologies/orientdb/blob/2.2.x/server/src/main/java/com/orientechnologies/orient/server/network/protocol/http/command/OServerCommandAuthenticatedServerAbstract.java">OServerCommandAuthenticatedServerAbstract</a> if the command requires an authentication at the server</li>
</ul>
<h2 id="the-hello-world-web"><a class="header" href="#the-hello-world-web">The Hello World Web</a></h2>
<p>To learn how to create a custom command, let's begin with a command that just returns "Hello world!".</p>
<p>OrientDB follows the convention that the command name is:</p>
<p><strong><code>OServerCommand&lt;method&gt;&lt;name&gt;</code></strong>
Where:</p>
<ul>
<li><strong>method</strong> is the HTTP method and can be: GET, POST, PUT, DELETE</li>
<li><strong>name</strong> is the command name</li>
</ul>
<p>In our case the class name will be "OServerCommandGetHello". We want that the use must be authenticated against the database to execute it as any user.</p>
<p>Furthermore we'd like to receive via configuration if we must display the text in Italic or not, so for this purpose we'll declare a parameter named "italic" of type boolean (true or false).</p>
<pre><code class="language-java">package org.example;

public class OServerCommandGetHello extends OServerCommandAuthenticatedDbAbstract {
  // DECLARE THE PARAMETERS
  private boolean italic = false;

  public OServerCommandGetHello(final OServerCommandConfiguration iConfiguration) {
    // PARSE PARAMETERS ON STARTUP
    for (OServerEntryConfiguration par : iConfiguration.parameters) {
      if (par.name.equals("italic")) {
        italic = Boolean.parseBoolean(par.value);
      }
    }
  }

  public boolean execute(final OHttpRequest iRequest, OHttpResponse iResponse) throws Exception {
    // CHECK THE SYNTAX. 3 IS THE NUMBER OF MANDATORY PARAMETERS
    String[] urlParts = checkSyntax(iRequest.url, 3, "Syntax error: hello/&lt;database&gt;/&lt;name&gt;");

    // TELLS TO THE SERVER WHAT I'M DOING (IT'S FOR THE PROFILER)
    iRequest.data.commandInfo = "Salutation";
    iRequest.data.commandDetail = "This is just a test";

    // GET THE PARAMETERS
    String name = urlParts[2];

    // CREATE THE RESULT
    String result = "Hello " + name;
    if (italic) {
      result = "&lt;i&gt;" + result + "&lt;/i&gt;";
    }

    // SEND BACK THE RESPONSE AS TEXT
    iResponse.send(OHttpUtils.STATUS_OK_CODE, "OK", null, result, OHttpUtils.CONTENT_TEXT_PLAIN);

    // RETURN ALWAYS FALSE, UNLESS YOU WANT TO EXECUTE COMMANDS IN CHAIN
    return false;
  }

  public String[] getNames() {
    return new String[]{"GET|hello/*","POST|hello/*"};
  }
}
</code></pre>
<p>Once created the command you need to register them through the <strong>orientdb-server-config.xml</strong> file. Put a new tag <code>&lt;command&gt;</code> under the tag <code>commands</code> of <code>&lt;listener&gt;</code> with attribute <code>protocol="http"</code>:</p>
<pre><code class="language-java">  ...
  &lt;listener protocol="http" port-range="2480-2490" ip-address="0.0.0.0"&gt;
    &lt;commands&gt;
      &lt;command implementation="org.example.OServerCommandGetHello" pattern="GET|hello/*"&gt;
        &lt;parameters&gt;
          &lt;entry name="italic" value="true"/&gt;
        &lt;/parameters&gt;
      &lt;/command&gt;
    &lt;/commands&gt;
  &lt;/listener&gt;
</code></pre>
<p>Where:</p>
<ul>
<li><strong>implementation</strong> is the full class name of the command</li>
<li><strong>pattern</strong> is how the command is called in the format: <code>&lt;HTTP-method&gt;|&lt;name&gt;</code>. In this case it's executed on HTTP GET with the URL: <code>/&lt;name&gt;</code></li>
<li><strong>parameters</strong> specify parameters to pass to the command on startup</li>
<li><strong>entry</strong> is the parameter pair name/value</li>
</ul>
<p>To test it open a browser at this address:</p>
<pre><code class="language-java">http://localhost:2480/hello/&lt;your-db-name&gt;/Luca
</code></pre>
<p>You will see:</p>
<pre><code class="language-java">Hello Luca
</code></pre>
<h2 id="complete-example"><a class="header" href="#complete-example">Complete example</a></h2>
<p>Below a more complex example taken by official distribution. It is the command that executes queries via HTTP. Note how to get a database instance to execute operation against the database:</p>
<pre><code class="language-java">public class OServerCommandGetQuery extends OServerCommandAuthenticatedDbAbstract {
  private static final String[] NAMES = { "GET|query/*" };

  public boolean execute(OHttpRequest iRequest, OHttpResponse iResponse) throws Exception {
    String[] urlParts = checkSyntax(
        iRequest.url,
        4,
        "Syntax error: query/&lt;database&gt;/sql/&lt;query-text&gt;[/&lt;limit&gt;][/&lt;fetchPlan&gt;].&lt;br/&gt;Limit is optional and is setted to 20 by default. Set expressly to 0 to have no limits.");

    int limit = urlParts.length &gt; 4 ? Integer.parseInt(urlParts[4]) : 20;
    String fetchPlan = urlParts.length &gt; 5 ? urlParts[5] : null;
    String text = urlParts[3];

    iRequest.data.commandInfo = "Query";
    iRequest.data.commandDetail = text;

    ODatabaseDocumentTx db = null;

    List&lt;OIdentifiable&gt; response;

    try {
      db = getProfiledDatabaseInstance(iRequest);
      response = (List&lt;OIdentifiable&gt;) db.command(new OSQLSynchQuery&lt;OIdentifiable&gt;(text, limit).setFetchPlan(fetchPlan)).execute();

    } finally {
      if (db != null) {
        db.close();
      }
    }

    iResponse.writeRecords(response, fetchPlan);
    return false;
  }

  public String[] getNames() {
    return NAMES;
  }
}
</code></pre>
<h1 id="include-jars-in-the-classpath"><a class="header" href="#include-jars-in-the-classpath">Include JARS in the classpath</a></h1>
<p>If your extensions need additional libraries put the additional jar files under the <strong><code>/lib</code></strong> folder of the server installation.</p>
<h1 id="debug-the-server"><a class="header" href="#debug-the-server">Debug the server</a></h1>
<p>To debug your plugin you can start your server in debug mode.</p>
<div class="table-wrapper"><table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody>
<tr><td>Main class</td><td><code>com.orientechnologies.orient.server.OServerMain</code></td></tr>
<tr><td>JVM parameters</td><td><code>-server -DORIENTDB_HOME=/opt/orientdb -Dorientdb.www.path=src/site -Djava.util.logging.config.file=${ORIENTDB_HOME}/config/orientdb-server-log.properties -Dorientdb.config.file=${ORIENTDB_HOME}/config/orientdb-server-config.xml</code></td></tr>
</tbody></table>
</div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../internals/Embedded-Server.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../plugins/Automatic-Backup.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../internals/Embedded-Server.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../plugins/Automatic-Backup.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>


        
        <img referrerpolicy="unsafe-url" src="https://tglman.org/OrientDB/matomo.php?idsite=7&amp;rec=1" style="border:0" alt="" />


        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
