<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Delete Edge - OrientDB</title>


        <!-- Custom HTML head -->

        <meta name="description" content="OrientDB documentation">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">OrientDB</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="sql---delete-edge"><a class="header" href="#sql---delete-edge">SQL - <code>DELETE EDGE</code></a></h1>
<p>Removes edges from the database.  This is the equivalent of the <a href="SQL-Delete.html"><code>DELETE</code></a> command, with the addition of checking and maintaining consistency with vertices by removing all cross-references to the edge from both the <code>in</code> and <code>out</code> vertex properties.</p>
<p><strong>Syntax</strong></p>
<pre><code class="language-sql">DELETE EDGE 
	( &lt;rid&gt;
	  |
	  [&lt;rid&gt; (, &lt;rid&gt;)*]
	  |
	  ( [ FROM (&lt;rid&gt; | &lt;select_statement&gt; ) ] [ TO ( &lt;rid&gt; | &lt;select_statement&gt; ) ] )
	  |
	  [&lt;class&gt;] 
	(
	[WHERE &lt;conditions&gt;]
	[LIMIT &lt;MaxRecords&gt;] 
	[BATCH &lt;batch-size&gt;]
</code></pre>
<ul>
<li><strong><code>FROM</code></strong> Defines the starting point vertex of the edge to delete.</li>
<li><strong><code>TO</code></strong> Defines the ending point vertex of the edge to delete.</li>
<li><strong><a href="SQL-Where.html"><code>WHERE</code></a></strong> Defines the filtering conditions.</li>
<li><strong><code>LIMIT</code></strong> Defines the maximum number of edges to delete.</li>
<li><strong><code>BATCH</code></strong> Defines the block size for the operation, allowing you to break large transactions down into smaller units to reduce resource demands.  Its default is <code>100</code>.  Feature introduced in 2.1.</li>
</ul>
<p><strong>Examples</strong></p>
<ul>
<li>
<p>Delete an edge by its RID:</p>
<pre>
orientdb> <code class='lang-sql userinput'>DELETE EDGE #22:38482</code>
</pre>
</li>
<li>
<p>Delete edges by RIDs:</p>
<pre>
orientdb> <code class='lang-sql userinput'>DELETE EDGE [#22:38482,#23:232,#33:2332]</code>
</pre>
</li>
<li>
<p>Delete edges where the data is a property that might exist in one or more edges between two vertices:</p>
<pre>
orientdb> <code class='lang-sql userinput'>DELETE EDGE FROM #11:101 TO #11:117 WHERE date >= "2012-01-15"</code>
</pre>
</li>
<li>
<p>Delete edges filtering by the edge class:</p>
<pre>
orientdb> <code class="lang-sql userinput">DELETE EDGE FROM #11:101 TO #11:117 WHERE @class = 'Owns' AND comment 
          LIKE "regex of forbidden words"</code>
</pre>
</li>
<li>
<p>Delete edge filtering by the edge class and date:</p>
<pre>
orientdb> <code class="lang-sql userinput">DELETE EDGE Owns WHERE date < "2011-11"</code>
</pre>
<p>Note that this syntax is faster than filtering the class through the <a href="SQL-Where.html"><code>WHERE</code></a> clause.</p>
</li>
<li>
<p>Delete edges where <code>in.price</code> shows the condition on the <code>to</code> vertex for the edge:</p>
<pre>
orientdb> <code class="lang-sql userinput">DELETE EDGE Owns WHERE date < "2011-11" AND in.price >= 202.43</code>
</pre>
</li>
<li>
<p>Delete edges in blocks of one thousand per transaction.</p>
<pre>
orientdb> <code class='lang-sql userinput'>DELETE EDGE Owns WHERE date < "2011-11" BATCH 1000</code>
</pre>
<p>This feature was introduced in version 2.1.</p>
</li>
<li>
<p>To delete edges from sub-query given a class:</p>
<pre>
orientdb> <code class="lang-sql userinput">DELETE EDGE E WHERE @rid IN (SELECT @rid FROM E)</code>
</pre>
</li>
</ul>
<blockquote>
<p>For more information, see</p>
<ul>
<li><a href="SQL-Delete.html"><code>DELETE</code></a></li>
<li><a href="SQL-Commands.html">SQL Commands</a></li>
</ul>
</blockquote>
<h2 id="use-cases"><a class="header" href="#use-cases">Use Cases</a></h2>
<h3 id="controlling-vertex-version-increments"><a class="header" href="#controlling-vertex-version-increments">Controlling Vertex Version Increments</a></h3>
<p>Creating and deleting edges causes OrientDB to increment versions on the involved vertices.  You can prevent this operation by implementing the <a href="../internals/RidBag.html">Bonsai Structure</a>.</p>
<p>By default, OrientDB only uses Bonsai as soon as it reaches the threshold, in order to optimize operation.  To always use Bonsai, configure it on the JVM or in the <code>orientdb-server-config.xml</code> configuration file.</p>
<pre>
$ <code class="lang-sh userinput">javac ... -DridBag.embeddedToSbtreeBonsaiThreshold=-1</code>
</pre>
<p>To implement it in Java, add the following line to your application at a point before opening the database:</p>
<pre><code class="language-java">OGlobalConfiguration.RID_BAG_EMBEDDED_TO_SBTREEBONSAI_THRESHOLD.setValue(-1);
</code></pre>
<p>For more information, see <a href="../general/Concurrency.html#concurrency-when-adding-edges">Concurrency on Adding Edges</a>.</p>
<div class="table-wrapper"><table><thead><tr><th><img src="../images/warning.png" alt="NOTE" /></th><th><strong>NOTE</strong>: When using a distributed database, OrientDB does not support SBTree indexes.  In these environments, you must set <code>ridBag.embeddedToSbtreeBonsaiThreshold=Integer.MAX\_VALUE</code> to avoid replication errors._</th></tr></thead><tbody>
</tbody></table>
</div>
<h3 id="deleting-edges-from-a-sub-query"><a class="header" href="#deleting-edges-from-a-sub-query">Deleting Edges from a Sub-query</a></h3>
<p>Consider a situation where you have an edge with a Record ID of <code>#11:0</code> that you want to delete.  In attempting to do so, you run the following query:</p>
<pre>
orientdb> <code class='lang-sql userinput'>DELETE EDGE FROM (SELECT FROM #11:0)</code>
</pre>
<p>This does <strong>not</strong> delete the edge.  To delete edges using sub-queries, you have to use a somewhat different syntax.  For instance,</p>
<pre>
orientdb> <code class="lang-sql userinput">DELETE EDGE E WHERE @rid IN (SELECT FROM #11:0)</code>
</pre>
<p>This removes the edge from your database.</p>
<h3 id="deleting-edges-through-java"><a class="header" href="#deleting-edges-through-java">Deleting Edges through Java</a></h3>
<p>When a <code>User</code> node follows a <code>company</code> node, we create an edge between the user and the company of the type <code>followCompany</code> and <code>CompanyFollowedBy</code> classes.  We can then remove the relevant edges through Java.</p>
<pre><code class="language-java">node1 is User node,
node2 is company node

OGraphDatabase rawGraph = orientGraph.getRawGraph();
String[] arg={"followCompany,"CompanyFollowedBy"};
Set&lt;OIdentifiable&gt; edges=rawGraph.getEdgesBetweenVertexes(node1, node2,null,arg);
for (OIdentifiable oIdentifiable : edges) {
	**rawGraph.removeEdge(oIdentifiable);
}
</code></pre>
<h2 id="history"><a class="header" href="#history">History</a></h2>
<h2 id="21"><a class="header" href="#21">2.1</a></h2>
<ul>
<li>Implements support for the option <code>BATCH</code> clause</li>
</ul>
<h2 id="14"><a class="header" href="#14">1.4</a></h2>
<ul>
<li>Command implements the Blueprints API.  In the event that you are working in Java using the OGraphDatabase API, you may experience some unexpected results in how edges are managed between versions.  To force the command to use the older API, change the GraphDB settings, as described on the [<code>ALTER DATABASE</code>])SQL-Alter-Database.md) command examples.</li>
</ul>
<h2 id="11"><a class="header" href="#11">1.1</a></h2>
<ul>
<li>First implementation of the feature.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../sql/SQL-Delete.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../sql/SQL-Delete-Vertex.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../sql/SQL-Delete.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../sql/SQL-Delete-Vertex.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>


        
        <img referrerpolicy="unsafe-url" src="https://tglman.org/OrientDB/matomo.php?idsite=7&amp;rec=1" style="border:0" alt="" />


        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
