<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>SQL Syntax - OrientDB</title>


        <!-- Custom HTML head -->

        <meta name="description" content="OrientDB documentation">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">OrientDB</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="orientdb-sql-syntax"><a class="header" href="#orientdb-sql-syntax">OrientDB SQL syntax</a></h1>
<p>OrientDB Query Language is and SQL dialect.</p>
<p>This page lists all the details about its syntax.</p>
<h2 id="identifiers"><a class="header" href="#identifiers">Identifiers</a></h2>
<p>An identifier is a name that identifies an entity in OrientDB schema. Identifiers can refer to</p>
<ul>
<li>class names</li>
<li>property names</li>
<li>index names</li>
<li>aliases</li>
<li>cluster names</li>
<li>function names</li>
<li>method names</li>
<li>named parameters</li>
<li>variable names (LET)</li>
</ul>
<p>An identifier is a sequence of characters delimited by back-ticks <code>`</code>.
Examples of valid identifiers are</p>
<ul>
<li><code>`surname`</code></li>
<li><code>`name and surname`</code></li>
<li><code>`foo.bar`</code></li>
<li><code>`a + b`</code></li>
<li><code>`select`</code></li>
</ul>
<p>The back-tick character can be used as a valid character for identifiers, but it has to be escaped with a backslash, eg.</p>
<ul>
<li><code>`foo \` bar`</code></li>
</ul>
<p>The following are reserved identifiers, they can NEVER be used with a different meaning (upper or lower case):</p>
<ul>
<li><code>@rid</code>: record ID</li>
<li><code>@class</code>: document class</li>
<li><code>@version</code>: document version</li>
<li><code>@type</code>: record type</li>
<li><code>@fieldTypes</code>: document field types</li>
</ul>
<p><strong>Simplified identifiers</strong></p>
<p>Identifiers that start with a letter or with <code>$</code> and that contain only numbers, letters and underscores, can be written without back-tick quoting. Reserved words cannot be used as simplified identifiers. Valid simplified identifiers are</p>
<ul>
<li><code>name</code></li>
<li><code>name_and_surname</code></li>
<li><code>$foo</code></li>
<li><code>name_12</code></li>
</ul>
<p>Examples of INVALID queries for wrong identifier syntax</p>
<pre><code class="language-SQL">/* INVALID - `from` is a reserved keyword */
SELECT from from from 
/* CORRECT */
SELECT `from` from `from` 

/* INVALID - simplified identifiers cannot start with a number */
SELECT name as 1name from Foo
/* CORRECT */
SELECT name as `1name` from Foo

/* INVALID - simplified identifiers cannot contain `-` character, `and` is a reserved keyword */
SELECT name-and-surname from Foo
/* CORRECT 1 - `name-and-surname` is a single field name */
SELECT `name-and-surname` from Foo
/* CORRECT 2 - `name`, `and` and `surname` are numbers and the result is the subtraction */
SELECT name-`and`-surname from Foo
/* CORRECT 2 - with spaces  */
SELECT name - `and` - surname from Foo

/* INVALID - wrong back-tick escaping */
SELECT `foo`bar` from Foo
/* CORRECT */
SELECT `foo\`bar` from Foo

</code></pre>
<p><strong>Case sensitivity</strong></p>
<p><em>(draft)</em>
In current version, class names are case <em>insensitive</em>, all the other identifiers are case sensitive.</p>
<h2 id="reserved-words"><a class="header" href="#reserved-words">Reserved words</a></h2>
<p>In OrientDB SQL the following are reserved words</p>
<ul>
<li>AFTER</li>
<li>AND</li>
<li>AS</li>
<li>ASC</li>
<li>BATCH</li>
<li>BEFORE</li>
<li>BETWEEN</li>
<li>BREADTH_FIRST</li>
<li>BY</li>
<li>CLUSTER</li>
<li>CONTAINS</li>
<li>CONTAINSALL</li>
<li>CONTAINSKEY</li>
<li>CONTAINSTEXT</li>
<li>CONTAINSVALUE</li>
<li>CREATE</li>
<li>DEFAULT</li>
<li>DEFINED</li>
<li>DELETE</li>
<li>DEPTH_FIRST</li>
<li>DESC</li>
<li>DISTINCT</li>
<li>EDGE</li>
<li>FETCHPLAN</li>
<li>FROM</li>
<li>INCREMENT</li>
<li>INSERT</li>
<li>INSTANCEOF</li>
<li>INTO</li>
<li>IS</li>
<li>LET</li>
<li>LIKE</li>
<li>LIMIT</li>
<li>LOCK</li>
<li>MATCH</li>
<li>MATCHES</li>
<li>MAXDEPTH</li>
<li>NOCACHE</li>
<li>NOT</li>
<li>NULL</li>
<li>OR</li>
<li>PARALLEL</li>
<li>POLYMORPHIC</li>
<li>RETRY</li>
<li>RETURN</li>
<li>SELECT</li>
<li>SKIP</li>
<li>STRATEGY</li>
<li>TIMEOUT</li>
<li>TRAVERSE</li>
<li>UNSAFE</li>
<li>UNWIND</li>
<li>UPDATE</li>
<li>UPSERT</li>
<li>VERTEX</li>
<li>WAIT</li>
<li>WHERE</li>
<li>WHILE</li>
</ul>
<h2 id="base-types"><a class="header" href="#base-types">Base types</a></h2>
<p>Accepted base types in OrientDB SQL are:</p>
<ul>
<li><strong>integer numbers</strong>:</li>
</ul>
<p>Valid integers are</p>
<pre><code>(32bit)
1
12345678
-45

(64bit)
1L
12345678L
-45L
</code></pre>
<ul>
<li><strong>floating point numbers</strong>: single or double precision</li>
</ul>
<p>Valid floating point numbers are:</p>
<pre><code>(single precision)
1.5
12345678.65432
-45.0

(double precision)
0.23D
.23D
</code></pre>
<ul>
<li><strong>absolute precision, decimal numbers</strong>: like BigDecimal in Java</li>
</ul>
<p>Use the <code>bigDecimal(&lt;number&gt;)</code> function to explicitly instantiate an absolute precision number.</p>
<ul>
<li><strong>strings</strong>: delimited by <code>'</code> or by <code>"</code>. Single quotes, double quotes and back-slash inside strings can escaped using a back-slash</li>
</ul>
<p>Valid strings are:</p>
<pre><code>"foo bar"
'foo bar'
"foo \" bar"
'foo \' bar'
'foo \\ bar'
</code></pre>
<ul>
<li><strong>booleans</strong>: boolean values are case sensitive</li>
</ul>
<p>Valid boolean values are</p>
<pre><code>true
false
</code></pre>
<p>Boolean value constants are case insensitive, so also <code>TRUE</code>, <code>True</code> and so on are valid.</p>
<ul>
<li><strong>links</strong>: A link is a pointer to a document in the database</li>
</ul>
<p>In SQL a link is represented as follows (short and extended notation):</p>
<pre><code>#&lt;cluster-id&gt;:&lt;cluster-position&gt;

or

{"@rid": "#&lt;cluster-id&gt;:&lt;cluster-position&gt;"}
</code></pre>
<p>eg.</p>
<pre><code>#12:15

or

{"@rid": "#12:15"}
</code></pre>
<p>The bracket notation is mandatory inside JSON, as the short notation is not a valid value in JSON.</p>
<ul>
<li><strong>null</strong>: case insensitive (for consistency with IS NULL and IS NOT NULL conditions, that are case insensitive)</li>
</ul>
<p>Valid null expressions include</p>
<pre><code>NULL
null
Null
nUll
...
</code></pre>
<h2 id="numbers"><a class="header" href="#numbers">Numbers</a></h2>
<p>OrientDB can store five different types of numbers</p>
<ul>
<li>Integer: 32bit signed</li>
<li>Long: 64bit signed</li>
<li>Float: decimal 32bit signed</li>
<li>Double: decimal 64bit signed</li>
<li>BigDecimal: absolute precision</li>
</ul>
<p><strong>Integers</strong> are represented in SQL as plain numbers, eg. <code>123</code>. If the number represented exceeds the Integer maximum size (see Java java.lang.Integer <code>MAX_VALUE</code> and <code>MIN_VALUE</code>), then it's automatically converted to a Long.</p>
<p>When an integer is saved to a schemaful property of another numerical type, it is automatically converted.</p>
<p><strong>Longs</strong> are represented in SQL as numbers with <code>L</code> suffix, eg. <code>123L</code> (L can be uppercase or lowercase). Plain numbers (without L prefix) that exceed the Integer range are also automatically converted to Long. If the number represented exceeds the Long maximum size (see Java java.lang.Long <code>MAX_VALUE</code> and <code>MIN_VALUE</code>), then the result is <code>NULL</code>;</p>
<p>Integer and Long numbers can be represented in base 10 (decimal), 8 (octal) or 16 (hexadecimal):</p>
<ul>
<li>decimal: <code>["-"] ("0" | ( ("1"-"9") ("0"-"9")* ) ["l"|"L"]</code>, eg.
<ul>
<li><code>15</code>, <code>15L</code></li>
<li><code>-164</code></li>
<li><code>999999999999</code></li>
</ul>
</li>
<li>octal: <code>["-"] "0" ("0"-"7")+ ["l"|"L"]</code>, eg.
<ul>
<li><code>01</code>, <code>01L</code> (equivalent to decimal 1)</li>
<li><code>010</code>, <code>010L</code> (equivalent to decimal 8)</li>
<li><code>-065</code>, <code>-065L</code> (equivalent to decimal 53)</li>
</ul>
</li>
<li>hexadecimal: <code>["-"] "0" ("x"|"X") ("0"-"9"," a"-"f", "A"-"F")+ ["l"|"L"]</code>, eg.
<ul>
<li><code>0x1</code>, <code>0X1</code>, <code>0x1L</code> (equivalent to 1 decimal)</li>
<li><code>0x10</code> (equivalent to decimal 16)</li>
<li><code>0xff</code>, <code>0xFF</code> (equivalent to decimal 255)</li>
<li><code>-0xff</code>, <code>-0xFF</code> (equivalent to decimal -255)</li>
</ul>
</li>
</ul>
<p><strong>Float</strong> numbers are represented in SQL as <code>[-][&lt;number&gt;].&lt;number&gt;</code>, eg. valid Float values are <code>1.5</code>, <code>-1567.0</code>, <code>.556767</code>. If the number represented exceeds the Float maximum size (see Java java.lang.Float <code>MAX_VALUE</code> and <code>MIN_VALUE</code>), then it's automatically converted to a Double.</p>
<p><strong>Double</strong> numbers are represented in SQL as <code>[-][&lt;number&gt;].&lt;number&gt;D</code> (D can be uppercase or lowercase), eg. valid Float values are <code>1.5d</code>, <code>-1567.0D</code>, <code>.556767D</code>. If the number represented exceeds the Double maximum size (see Java java.lang.Double <code>MAX_VALUE</code> and <code>MIN_VALUE</code>), then the result is <code>NULL</code></p>
<p>Float and Double numbers can be represented as decimal, decimal with exponent, hexadecimal and hexadecimal with exponent.
Here is the full syntax:</p>
<pre><code>
FLOATING_POINT_LITERAL: ["-"] ( &lt;DECIMAL_FLOATING_POINT_LITERAL&gt; | &lt;HEXADECIMAL_FLOATING_POINT_LITERAL&gt; )

DECIMAL_FLOATING_POINT_LITERAL:
      (["0"-"9"])+ "." (["0"-"9"])* (&lt;DECIMAL_EXPONENT&gt;)? (["f","F","d","D"])?
      | "." (["0"-"9"])+ (&lt;DECIMAL_EXPONENT&gt;)? (["f","F","d","D"])?
      | (["0"-"9"])+ &lt;DECIMAL_EXPONENT&gt; (["f","F","d","D"])?
      | (["0"-"9"])+ (&lt;DECIMAL_EXPONENT&gt;)? ["f","F","d","D"]
  &gt;

DECIMAL_EXPONENT: ["e","E"] (["+","-"])? (["0"-"9"])+ 

HEXADECIMAL_FLOATING_POINT_LITERAL:
        "0" ["x", "X"] (["0"-"9","a"-"f","A"-"F"])+ (".")? &lt;HEXADECIMAL_EXPONENT&gt; (["f","F","d","D"])?
      | "0" ["x", "X"] (["0"-"9","a"-"f","A"-"F"])* "." (["0"-"9","a"-"f","A"-"F"])+ &lt;HEXADECIMAL_EXPONENT&gt; (["f","F","d","D"])?

HEXADECIMAL_EXPONENT: ["p","P"] (["+","-"])? (["0"-"9"])+ 
</code></pre>
<p>Eg.</p>
<ul>
<li>base 10
<ul>
<li><code>0.5</code></li>
<li><code>0.5f</code>, <code>0.5F</code>, <code>2f</code> (ATTENTION, this is NOT hexadecimal)</li>
<li><code>0.5d</code>, <code>0.5D</code>, <code>2D</code> (ATTENTION, this is NOT hexadecimal)</li>
<li><code>3.21e2d</code> equivalent to <code>3.21 * 10^2 = 321</code></li>
</ul>
</li>
<li>base 16
<ul>
<li><code>0x3p4d</code> equivalent to <code>3 * 2^4 = 48</code></li>
<li><code>0x3.5p4d</code> equivalent to <code>3.5(base 16) * 2^4</code></li>
</ul>
</li>
</ul>
<p><strong>BigDecimal</strong> in OrientDB is represented as a Java BigDecimal.
The instantiation of BigDecimal can be done explicitly, using the <code>bigDecimal(&lt;number&gt; | &lt;string&gt;)</code> function, eg. <code>bigDecimal(124.4)</code> or <code>bigDecimal("124.4")</code></p>
<h4 id="mathematical-operations"><a class="header" href="#mathematical-operations">Mathematical operations</a></h4>
<p>Mathematical Operations with numbers follow these rules:</p>
<ul>
<li>Operations are calculated from left to right, following the operand priority.</li>
<li>When an operation involves two numbers of different type, both are converted to the higher precision type between the two.</li>
</ul>
<p>Eg.</p>
<pre><code>15 + 20L = 15L + 20L     // the 15 is converted to 15L

15L + 20 = 15L + 20L     // the 20 is converted to 20L

15 + 20.3 = 15.0 + 20.3     // the 15 is converted to 15.0

15.0 + 20.3D = 15.0D + 20.3D     // the 15.0 is converted to 15.0D
</code></pre>
<p>the overflow follows Java rules.</p>
<p>The conversion of a number to BigDecimal can be done explicitly, using the <code>bigDecimal()</code> function, eg. <code>bigDecimal(124.4)</code> or <code>bigDecimal("124.4")</code></p>
<h2 id="collections"><a class="header" href="#collections">Collections</a></h2>
<p>OrientDB supports two types of collections:</p>
<ul>
<li><strong>Lists</strong>: ordered, allow duplicates</li>
<li><strong>Sets</strong>: not ordered (?), no duplicates</li>
</ul>
<p>The SQL notation allows to create <code>Lists</code> with square bracket notation, eg.</p>
<pre><code>[1, 3, 2, 2, 4]
</code></pre>
<p>A <code>List</code> can be converted to a <code>Set</code> using the <code>.asSet()</code> method:</p>
<pre><code>[1, 3, 2, 2, 4].asSet() = [1, 3, 2, 4] /*  the order of the elements in the resulting set is not guaranteed */
</code></pre>
<h2 id="binary-data"><a class="header" href="#binary-data">Binary data</a></h2>
<p>OrientDB can store binary data (byte arrays) in document fields. There is no native representation of binary data in SQL syntax, insert/update a binary field you have to use <code>decode(&lt;base64string&gt;, "base64")</code> function.</p>
<p>To obtain the base64 string representation of a byte array, you can use the function <code>encode(&lt;byteArray&gt;, "base64")</code></p>
<h2 id="expressions"><a class="header" href="#expressions">Expressions</a></h2>
<p>Expressions can be used as:</p>
<ul>
<li>single projections</li>
<li>operands in a condition</li>
<li>items in a GROUP BY</li>
<li>items in an ORDER BY</li>
<li>right argument of a LET assignment</li>
</ul>
<p>Valid expressions are:</p>
<ul>
<li><code>&lt;base type value&gt;</code> (string, number, boolean)</li>
<li><code>&lt;field name&gt;</code></li>
<li><code>&lt;@attribute name&gt;</code></li>
<li><code>&lt;function invocation&gt;</code></li>
<li><code>&lt;expression&gt; &lt;binary operator&gt; &lt;expression&gt;</code>: for operator precedence, see below table.</li>
<li><code>&lt;unary operator&gt; &lt;expression&gt;</code></li>
<li><code>( &lt;expression&gt; )</code>: expression between parenthesis, for precedences</li>
<li><code>( &lt;query&gt; )</code>: query between parenthesis</li>
<li><code>[ &lt;expression&gt; (, &lt;expression&gt;)* ]</code>: a list, an ordered collection that allows duplicates, eg. <code>["a", "b", "c"]</code>)</li>
<li><code>{ &lt;expression&gt;: &lt;expression&gt; (, &lt;expression&gt;: &lt;expression&gt;)* }</code>: the result is an ODocument, with <field>:<value> values, eg. <code>{"a":1, "b": 1+2+3, "c": foo.bar.size() }</code>. The key name is converted to String if it's not.</li>
<li><code>&lt;expression&gt; &lt;modifier&gt; ( &lt;modifier&gt; )*</code>: a chain of modifiers (see below)</li>
<li><code>&lt;json&gt;</code>: It is translated to an ODocument. Nested JSON is allowed and is translated to nested ODocuments</li>
<li><code>&lt;expression&gt; IS NULL</code>: check for null value of an expression</li>
<li><code>&lt;expression&gt; IS NOT NULL</code>: check for non null value of an expression</li>
</ul>
<h3 id="modifiers"><a class="header" href="#modifiers">Modifiers</a></h3>
<p>A modifier can be</p>
<ul>
<li>
<p>a dot-separated field chain, eg. <code>foo.bar</code>. Dot notation is used to navigate relationships and document fields. eg.</p>
<pre><code>john = {
          name: "John",
          surname: "Jones",
          address: {
             city: {
                name: "London"
             }
          }
       }
          
john.address.city.name = "London"
</code></pre>
</li>
<li>
<p>a method invocation, eg. <code>foo.size()</code>.</p>
<p>Method invocations can be chained, eg. <code>foo.toLowerCase().substring(2, 4)</code></p>
</li>
<li>
<p>a square bracket filter, eg. <code>foo[1]</code> or <code>foo[name = 'John']</code></p>
</li>
</ul>
<h3 id="square-bracket-filters"><a class="header" href="#square-bracket-filters">Square bracket filters</a></h3>
<p>Square brackets can be used to filter collections or maps.</p>
<p><code>field[ ( &lt;expression&gt; | &lt;range&gt; | &lt;condition&gt; ) ]</code></p>
<p>Based on what is between brackets, the square bracket filtering has different effects:</p>
<ul>
<li><code>&lt;expression&gt;</code>: If the expression returns an Integer or Long value (i), the result of the square bracket filtering
is the i-th element of the collection/map. If the result of the expression (K) is not a number, the filtering returns the value corresponding to the key K in the map field. If the field is not a collection/map, the square bracket filtering returns <code>null</code>.
The result of this filtering is ALWAYS a single value.</li>
<li><code>&lt;range&gt;</code>: A range is something like <code>M..N</code>  or <code>M...N</code> where M and N are integer/long numbers, eg. <code>fieldName[2..5]</code>. The result of range filtering is a collection that is a subset of the original field value, containing all the items from position M (included) to position N (excluded for <code>..</code>, included for <code>...</code>). Eg. if <code>fieldName = ['a', 'b', 'c', 'd', 'e']</code>, <code>fieldName[1..3] = ['b', 'c']</code>, <code>fieldName[1...3] = ['b', 'c', 'd']</code>. Ranges start from <code>0</code>. The result of this filtering is ALWAYS a list (ordered collection, allowing duplicates). If the original collection was ordered, then the result will preserve the order.</li>
<li><code>&lt;condition&gt;</code>: A normal SQL condition, that is applied to each element in the <code>fieldName</code> collection. The result is a sub-collection that contains only items that match the condition. Eg. <code>fieldName = [{foo = 1},{foo = 2},{foo = 5},{foo = 8}]</code>, <code>fieldName[foo &gt; 4] = [{foo = 5},{foo = 8}]</code>. The result of this filtering is ALWAYS a list (ordered collection, allowing duplicates). If the original collection was ordered, then the result will preserve the order.</li>
</ul>
<h2 id="conditions"><a class="header" href="#conditions">Conditions</a></h2>
<p>A condition is an expression that returns a boolean value.</p>
<p>An expression that returns something different from a boolean value is always evaluated to <code>false</code>.</p>
<h2 id="comparison-operators"><a class="header" href="#comparison-operators">Comparison Operators</a></h2>
<ul>
<li><strong><code>=</code>  (equals)</strong>: If used in an expression, it is the boolean equals (eg. <code>select from Foo where name = 'John'</code>. If used in an SET section of INSERT/UPDATE statements or on a LET statement, it represents a variable assignment (eg. <code>insert into Foo set name = 'John'</code>)</li>
<li><strong><code>!=</code> (not equals)</strong>: inequality operator.</li>
<li><strong><code>&lt;&gt;</code> (not equals)</strong>: same as <code>!=</code></li>
<li><strong><code>&gt;</code>  (greater than)</strong></li>
<li><strong><code>&gt;=</code> (greater or equal)</strong></li>
<li><strong><code>&lt;</code>  (less than)</strong></li>
<li><strong><code>&lt;=</code> (less or equal)</strong></li>
</ul>
<h2 id="math-operators"><a class="header" href="#math-operators">Math Operators</a></h2>
<ul>
<li><strong><code>+</code>  (plus)</strong>: addition if both operands are numbers, string concatenation (with string conversion) if one of the operands is not a number. The order of calculation (and conversion) is from left to right, eg <code>'a' + 1 + 2 = 'a12'</code>, <code>1 + 2 + 'a' = '3a'</code>. It can also be used as a unary operator (no effect)</li>
<li><strong><code>-</code>  (minus</strong>): subtraction between numbers. Non-number operands are evaluated to zero. Null values are treated as a zero, eg <code>1 + null = 1</code>. Minus can also be used as a unary operator, to invert the sign of a number</li>
<li><strong><code>*</code>  (multiplication)</strong>: multiplication between numbers. If one of the operands is null, the multiplication will evaluate to null.</li>
<li><strong><code>/</code>  (division)</strong>: division between numbers. If one of the operands is null, the division will evaluate to null.. The result of a division by zero is NaN</li>
<li><strong><code>%</code>  (modulo)</strong>: modulo between numbers. If one of the operands is null, the modulo will evaluate to null..</li>
<li><strong><code>&gt;&gt;</code>  (bitwise right shift)</strong>: shifts bits on the right operand by a number of positions equal to the right operand. Eg. <code>8 &gt;&gt; 2 = 2</code>. Both operands have to be Integer or Long values, otherwise the result will be null.</li>
<li><strong><code>&gt;&gt;&gt;</code>  (unsigned bitwise right shift)</strong> The same as <code>&gt;&gt;</code>, but with negative numbers it will fill with <code>1</code> on the left. Both operands have to be Integer or Long values, otherwise the result will be null.</li>
<li><strong><code>&lt;&lt;</code>  (bitwise right shift)</strong> shifts bits on the left, eg. <code>2 &lt;&lt; 2 = 8</code>. Both operands have to be Integer or Long values, otherwise the result will be null.</li>
<li><strong><code>&amp;</code>  (bitwise AND)</strong> executes a bitwise AND operation. Both operands have to be Integer or Long values, otherwise the result will be null.</li>
<li><strong><code>|</code>  (bitwise OR)</strong> executes a bitwise OR operation. Both operands have to be Integer or Long values, otherwise the result will be null.</li>
<li><strong><code>^</code>  (bitwise XOR)</strong> executes a bitwise XOR operation. Both operands have to be Integer or Long values, otherwise the result will be null.</li>
<li><strong><code>||</code></strong>: array concatenation (see below for details)</li>
</ul>
<h3 id="math-operators-precedence"><a class="header" href="#math-operators-precedence">Math Operators precedence</a></h3>
<div class="table-wrapper"><table><thead><tr><th>type</th><th>Operators</th></tr></thead><tbody>
<tr><td>multiplicative</td><td><code>*</code> <code>/</code> <code>%</code></td></tr>
<tr><td>additive</td><td><code>+</code> <code>-</code></td></tr>
<tr><td>shift</td><td><code>&lt;&lt;</code> <code>&gt;&gt;</code> <code>&gt;&gt;&gt;</code></td></tr>
<tr><td>bitwise AND</td><td><code>&amp;</code></td></tr>
<tr><td>bitwise exclusive OR</td><td><code>^</code></td></tr>
<tr><td>bitwise inclusive OR</td><td><code>|</code></td></tr>
<tr><td>array concatenation</td><td><code>||</code></td></tr>
</tbody></table>
</div>
<h2 id="math--assign-operators"><a class="header" href="#math--assign-operators">Math + Assign operators</a></h2>
<p>These operators can be used in UPDATE statements to update and set values. The semantics is the same as the operation plus the assignment,
eg. <code>a += 2</code> is just a shortcut for <code>a = a + 2</code>.</p>
<ul>
<li><strong><code>+=</code>  (add and assign)</strong>: adds right operand to left operand and assigns the value to the left operand. Returns the final value of the left operand. If one of the operands is not a number, then this operator acts as a <code>concatenate string values and assign</code></li>
<li><strong><code>-=</code>  (subtract and assign)</strong>: subtracts right operand from left operand and assigns the value to the left operand. Returns the final value of the left operand</li>
<li><strong><code>*=</code>  (multiply and assign)</strong>: multiplies left operand and right operand and assigns the value to the left operand. Returns the final value of the left operand</li>
<li><strong><code>/=</code>  (divide and assign)</strong>: divides left operand by right operand and assigns the value to the left operand. Returns the final value of the left operand</li>
<li><strong><code>%=</code>  (modulo and assign)</strong>: calculates left operand modulo right operand and assigns the value to the left operand. Returns the final value of the left operand</li>
</ul>
<h2 id="array-concatenation"><a class="header" href="#array-concatenation">Array concatenation</a></h2>
<p>The <code>||</code> operator concatenates two arrays.</p>
<pre><code>[1, 2, 3] || [4, 5] = [1, 2, 3, 4, 5]
</code></pre>
<p>If one of the elements is not an array, then it's converted to an array of one element, before the concatenation operation is executed</p>
<pre><code>[1, 2, 3] || 4 = [1, 2, 3, 4]

1 || [2, 3, 4] = [1, 2, 3, 4]

1 || 2 || 3 || 4 = [1, 2, 3, 4]
</code></pre>
<p>To add an array, you have to wrap the array element in another array:</p>
<pre><code>[[1, 2], [3, 4]] || [5, 6] = [[1, 2], [3, 4], 5, 6]

[[1, 2], [3, 4]] || [[5, 6]] = [[1, 2], [3, 4], [5, 6]]
</code></pre>
<p>The result of an array concatenation is always a List (ordered and with duplicates). The order of the elements in the list is the same as the order in the elements in the source arrays, in the order they appear in the original expression.</p>
<p>To transform the result of an array concatenation in a Set (remove duplicates), just use the <code>.asSet()</code> method</p>
<pre><code>[1, 2] || [2, 3] = [1, 2, 2, 3]

([1, 2] || [2, 3]).asSet() = [1, 2, 3] 
</code></pre>
<p><strong>Specific behavior of NULL</strong></p>
<p>Null value has no effect when applied to a || operation. eg.</p>
<pre><code>[1, 2] || null = [1, 2]

null || [1, 2] = [1, 2]
</code></pre>
<p>To add null values to a collection, you have to explicitly wrap them in another collection, eg.</p>
<pre><code>[1, 2] || [null] = [1, 2, null]
</code></pre>
<h2 id="boolean-operators"><a class="header" href="#boolean-operators">Boolean Operators</a></h2>
<ul>
<li><strong><code>AND</code></strong>: logical AND</li>
<li><strong><code>OR</code></strong>: logical OR</li>
<li><strong><code>NOT</code></strong>: logical NOT</li>
<li><strong><code>CONTAINS</code></strong>: checks if the left collection contains the right element. The left argument has to be a collection, otherwise it returns FALSE. It's NOT the check of collection intersections, so <code>['a', 'b', 'c'] CONTAINS ['a', 'b']</code> will return FALSE, while <code>['a', 'b', 'c'] CONTAINS 'a'</code> will return TRUE.</li>
<li><strong><code>IN</code></strong>: the same as CONTAINS, but with inverted operands.</li>
<li><strong><code>CONTAINSKEY</code></strong>: for maps, the same as for CONTAINS, but checks on the map keys</li>
<li><strong><code>CONTAINSVALUE</code></strong>: for maps, the same as for CONTAINS, but checks on the map values</li>
<li><strong><code>LIKE</code></strong>: for strings, checks if a string contains another string. <code>%</code> is used as a wildcard, eg. <code>'foobar CONTAINS '%ooba%''</code></li>
<li><strong><code>IS DEFINED</code></strong> (unary): returns TRUE is a field is defined in a document</li>
<li><strong><code>IS NOT DEFINED</code></strong> (unary): returns TRUE is a field is not defined in a document</li>
<li><strong><code>BETWEEN - AND</code></strong> (ternary): returns TRUE is a value is between two values, eg. <code>5 BETWEEN 1 AND 10</code></li>
<li><strong><code>MATCHES</code></strong>: checks if a string matches a regular expression</li>
<li><strong><code>INSTANCEOF</code></strong>: checks the type of a value, the right operand has to be the a String representing a class name, eg. <code>father INSTANCEOF 'Person'</code></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../sql/SQL-Metadata.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../sql/SQL-Projections.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../sql/SQL-Metadata.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../sql/SQL-Projections.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>


        
        <img referrerpolicy="unsafe-url" src="https://tglman.org/OrientDB/matomo.php?idsite=7&amp;rec=1" style="border:0" alt="" />


        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
